"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/cargo/route";
exports.ids = ["app/api/cargo/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcargo%2Froute&page=%2Fapi%2Fcargo%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcargo%2Froute.ts&appDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcargo%2Froute&page=%2Fapi%2Fcargo%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcargo%2Froute.ts&appDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Burak_Documents_GitHub_destek_src_app_api_cargo_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/cargo/route.ts */ \"(rsc)/./src/app/api/cargo/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/cargo/route\",\n        pathname: \"/api/cargo\",\n        filename: \"route\",\n        bundlePath: \"app/api/cargo/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Burak\\\\Documents\\\\GitHub\\\\destek\\\\src\\\\app\\\\api\\\\cargo\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Burak_Documents_GitHub_destek_src_app_api_cargo_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/cargo/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjYXJnbyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2FyZ28lMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjYXJnbyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNCdXJhayU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q2Rlc3RlayU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDQnVyYWslNUNEb2N1bWVudHMlNUNHaXRIdWIlNUNkZXN0ZWsmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzJCO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVzdGVrLz82OTNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEJ1cmFrXFxcXERvY3VtZW50c1xcXFxHaXRIdWJcXFxcZGVzdGVrXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGNhcmdvXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jYXJnby9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NhcmdvXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jYXJnby9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEJ1cmFrXFxcXERvY3VtZW50c1xcXFxHaXRIdWJcXFxcZGVzdGVrXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGNhcmdvXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jYXJnby9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcargo%2Froute&page=%2Fapi%2Fcargo%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcargo%2Froute.ts&appDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/cargo/route.ts":
/*!************************************!*\
  !*** ./src/app/api/cargo/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_cargo_repair__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/cargo-repair */ \"(rsc)/./src/lib/cargo-repair.ts\");\n\n\n\n\nconst DEFAULT_HQ_NAME = \"Merkez Ofis Deposu\";\nfunction isUnknownRecordStatusArg(error) {\n    if (!(error instanceof Error)) return false;\n    return error.message.includes(\"Unknown argument `recordStatus`\") || error.message.includes(\"record_status\");\n}\nfunction normalizeRecordStatus(status, notes) {\n    const raw = typeof status === \"string\" ? status.toLowerCase() : \"open\";\n    const { meta } = (0,_lib_cargo_repair__WEBPACK_IMPORTED_MODULE_3__.parseCargoRepairMeta)(notes);\n    if (meta?.active) return \"device_repair\";\n    if (meta?.status === \"completed\" && meta?.shipmentStatus === \"ready_to_ship\") return \"ready_to_ship\";\n    return raw;\n}\nfunction isClosedRepairStatus(status) {\n    return status === \"COMPLETED\" || status === \"UNREPAIRABLE\";\n}\nasync function getHeadquartersLocation() {\n    const hq = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.location.findFirst({\n        where: {\n            OR: [\n                {\n                    type: \"HEADQUARTERS\"\n                },\n                {\n                    name: {\n                        contains: \"Merkez\"\n                    }\n                },\n                {\n                    name: {\n                        contains: \"Ofis\"\n                    }\n                }\n            ],\n            active: true\n        },\n        orderBy: {\n            name: \"asc\"\n        }\n    });\n    return hq;\n}\n// GET all cargo trackings\nasync function GET(request) {\n    try {\n        const headquarters = await getHeadquartersLocation();\n        const hqName = headquarters?.name || DEFAULT_HQ_NAME;\n        let cargos = [];\n        try {\n            cargos = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cargoTracking.findMany({\n                include: {\n                    devices: true\n                },\n                orderBy: [\n                    {\n                        recordStatus: \"asc\"\n                    },\n                    {\n                        createdAt: \"desc\"\n                    }\n                ]\n            });\n        } catch (error) {\n            if (!isUnknownRecordStatusArg(error)) throw error;\n            cargos = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cargoTracking.findMany({\n                include: {\n                    devices: true\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                }\n            });\n        }\n        const enriched = await Promise.all(cargos.map(async (cargo)=>{\n            // Varsayılan ofis ismi\n            let locationName = cargo.type === \"INCOMING\" ? hqName : null;\n            // Eğer kargo cihaz içeriyorsa, bu cihazların güncel konumuna bakalım\n            if (cargo.devices && cargo.devices.length > 0) {\n                const serials = cargo.devices.map((d)=>d.serialNumber).filter((s)=>Boolean(s));\n                if (serials.length > 0) {\n                    // Bu seri numaralarına sahip cihazların güncel konumlarını bulalım\n                    const devicesInSystem = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.equivalentDevice.findMany({\n                        where: {\n                            serialNumber: {\n                                in: serials\n                            }\n                        },\n                        include: {\n                            location: true\n                        }\n                    });\n                    // Cihazların bulunduğu benzersiz konumları topla\n                    const locations = new Set();\n                    devicesInSystem.forEach((d)=>{\n                        if (d.location && d.location.name) {\n                            locations.add(d.location.name);\n                        } else if (d.currentLocation === \"ON_SITE_SERVICE\") {\n                            locations.add(\"Sahada / M\\xfcşteride\");\n                        } else if (d.currentLocation === \"AT_CUSTOMER\") {\n                            locations.add(\"M\\xfcşteride\");\n                        }\n                    });\n                    if (locations.size === 1) {\n                        locationName = Array.from(locations)[0];\n                    } else if (locations.size > 1) {\n                        locationName = \"Muhtelif / Dağıtılmış\";\n                    }\n                // locations.size === 0 ise (henüz envantere girmemiş veya eşleşmemiş), varsayılanı koru\n                }\n            }\n            const repairRows = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.deviceRepair.findMany({\n                where: {\n                    repairNotes: {\n                        contains: `[CARGO:${cargo.id}]`\n                    }\n                },\n                orderBy: {\n                    updatedAt: \"desc\"\n                },\n                select: {\n                    id: true,\n                    repairNumber: true,\n                    status: true,\n                    repairNotes: true,\n                    updatedAt: true\n                }\n            });\n            const deviceRepairMap = new Map();\n            for (const row of repairRows){\n                const match = row.repairNotes?.match(/\\[CARGO_DEVICE:([^\\]]+)\\]/);\n                if (!match) continue;\n                const cargoDeviceId = match[1];\n                const status = isClosedRepairStatus(row.status) ? \"closed\" : \"open\";\n                const existing = deviceRepairMap.get(cargoDeviceId);\n                if (existing && existing.updatedAt > row.updatedAt) continue;\n                deviceRepairMap.set(cargoDeviceId, {\n                    id: row.id,\n                    repairNumber: row.repairNumber,\n                    status,\n                    state: String(row.status || \"\").toLowerCase(),\n                    updatedAt: row.updatedAt\n                });\n            }\n            const anyOpenRepair = Array.from(deviceRepairMap.values()).some((item)=>item.status === \"open\");\n            const anyClosedRepair = Array.from(deviceRepairMap.values()).some((item)=>item.status === \"closed\");\n            const normalized = anyOpenRepair ? \"device_repair\" : anyClosedRepair ? \"ready_to_ship\" : normalizeRecordStatus(cargo.recordStatus, cargo.notes);\n            return {\n                ...cargo,\n                recordStatus: normalized,\n                devices: cargo.devices.map((device)=>{\n                    const ticket = deviceRepairMap.get(device.id);\n                    return {\n                        ...device,\n                        repairTicket: ticket ? {\n                            id: ticket.id,\n                            repairNumber: ticket.repairNumber,\n                            status: ticket.status,\n                            state: ticket.state\n                        } : undefined\n                    };\n                }),\n                currentLocationName: locationName\n            };\n        }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(enriched);\n    } catch (error) {\n        console.error(\"Error fetching cargo:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch cargo\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST create new cargo\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { trackingNumber, type, status, recordStatus, sender, receiver, cargoCompany, sentDate, deliveredDate, destination, destinationAddress, notes, devices } = body;\n        // Map enum values\n        const typeMap = {\n            \"incoming\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoType.INCOMING,\n            \"outgoing\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoType.OUTGOING,\n            \"on_site_service\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoType.ON_SITE_SERVICE,\n            \"installation_team\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoType.INSTALLATION_TEAM\n        };\n        const statusMap = {\n            \"in_transit\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoStatus.IN_TRANSIT,\n            \"delivered\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoStatus.DELIVERED,\n            \"returned\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoStatus.RETURNED,\n            \"lost\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoStatus.LOST,\n            \"damaged\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoStatus.DAMAGED\n        };\n        const destinationMap = {\n            \"customer\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoDestination.CUSTOMER,\n            \"distributor\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoDestination.DISTRIBUTOR,\n            \"branch\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoDestination.BRANCH,\n            \"headquarters\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoDestination.HEADQUARTERS\n        };\n        const conditionMap = {\n            \"new\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.DeviceCondition.NEW,\n            \"used\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.DeviceCondition.USED,\n            \"refurbished\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.DeviceCondition.REFURBISHED,\n            \"damaged\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.DeviceCondition.DAMAGED\n        };\n        const purposeMap = {\n            \"installation\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoPurpose.INSTALLATION,\n            \"replacement\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoPurpose.REPLACEMENT,\n            \"repair\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoPurpose.REPAIR,\n            \"return\": _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoPurpose.RETURN\n        };\n        const recordStatusMap = {\n            \"open\": \"OPEN\",\n            \"on_hold\": \"ON_HOLD\",\n            \"closed\": \"CLOSED\",\n            \"device_repair\": \"ON_HOLD\"\n        };\n        const normalizedTrackingNumber = String(trackingNumber || \"\").trim();\n        if (!normalizedTrackingNumber) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Takip numarasi zorunludur.\"\n            }, {\n                status: 400\n            });\n        }\n        const existingCargo = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cargoTracking.findUnique({\n            where: {\n                trackingNumber: normalizedTrackingNumber\n            },\n            select: {\n                id: true\n            }\n        });\n        if (existingCargo) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Bu takip numarasi zaten kayitli. Lutfen farkli bir takip numarasi girin.\"\n            }, {\n                status: 409\n            });\n        }\n        const deviceList = Array.isArray(devices) ? devices : [];\n        const resolvedType = typeMap[type?.toLowerCase()] || _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoType.OUTGOING;\n        const isIncoming = resolvedType === _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoType.INCOMING;\n        const createData = {\n            trackingNumber: normalizedTrackingNumber,\n            type: resolvedType,\n            status: statusMap[status?.toLowerCase()] || _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoStatus.IN_TRANSIT,\n            sender,\n            receiver,\n            cargoCompany: cargoCompany || \"\",\n            sentDate: sentDate ? new Date(sentDate) : null,\n            deliveredDate: deliveredDate ? new Date(deliveredDate) : null,\n            destination: isIncoming ? _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoDestination.HEADQUARTERS : destinationMap[destination?.toLowerCase()] || _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoDestination.CUSTOMER,\n            destinationAddress: isIncoming ? typeof destinationAddress === \"string\" && destinationAddress.trim() ? destinationAddress : DEFAULT_HQ_NAME : destinationAddress,\n            notes,\n            devices: {\n                create: deviceList.map((device)=>({\n                        deviceName: device.deviceName,\n                        model: device.model,\n                        serialNumber: device.serialNumber,\n                        quantity: device.quantity || 1,\n                        condition: conditionMap[device.condition?.toLowerCase()] || _prisma_client__WEBPACK_IMPORTED_MODULE_2__.DeviceCondition.NEW,\n                        purpose: purposeMap[device.purpose?.toLowerCase()] || _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoPurpose.INSTALLATION\n                    }))\n            }\n        };\n        if (typeof recordStatus === \"string\") {\n            const mappedStatus = recordStatusMap[recordStatus.toLowerCase()];\n            if (mappedStatus) {\n                createData.recordStatus = mappedStatus;\n            }\n        }\n        if (String(recordStatus || \"\").toLowerCase() === \"device_repair\") {\n            createData.notes = (0,_lib_cargo_repair__WEBPACK_IMPORTED_MODULE_3__.appendCargoRepairHistory)(typeof notes === \"string\" ? notes : \"\", {\n                at: new Date().toISOString(),\n                action: \"Kargo kaydi cihaz tamiri durumunda olusturuldu\"\n            }, {\n                active: true,\n                status: \"pending\"\n            });\n        }\n        let cargo;\n        try {\n            cargo = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cargoTracking.create({\n                data: createData,\n                include: {\n                    devices: true\n                }\n            });\n        } catch (error) {\n            if (!isUnknownRecordStatusArg(error)) throw error;\n            delete createData.recordStatus;\n            cargo = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cargoTracking.create({\n                data: createData,\n                include: {\n                    devices: true\n                }\n            });\n        }\n        // --- AUTOMATIC WAREHOUSE ASSIGNMENT FOR INCOMING CARGO ---\n        if (resolvedType === _prisma_client__WEBPACK_IMPORTED_MODULE_2__.CargoType.INCOMING) {\n            try {\n                let targetLocation;\n                // 1. Determine Target Location\n                if (body.targetLocationId) {\n                    targetLocation = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.location.findUnique({\n                        where: {\n                            id: body.targetLocationId\n                        }\n                    });\n                }\n                // Fallback to \"Office\" if no target selected or not found\n                if (!targetLocation) {\n                    targetLocation = await getHeadquartersLocation();\n                    if (!targetLocation) {\n                        targetLocation = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.location.create({\n                            data: {\n                                name: DEFAULT_HQ_NAME,\n                                type: \"HEADQUARTERS\",\n                                address: \"Otomatik Oluşturuldu\",\n                                active: true\n                            }\n                        });\n                    }\n                }\n                // 2. Process only predefined equivalent devices\n                let movedEquivalentCount = 0;\n                let skippedNonEquivalentCount = 0;\n                for (const device of deviceList){\n                    const sourceType = String(device?.sourceType || \"\").toLowerCase();\n                    if (sourceType !== \"equivalent\") {\n                        skippedNonEquivalentCount++;\n                        continue;\n                    }\n                    if (!device.serialNumber || device.serialNumber.length < 3) continue;\n                    let existingDevice = null;\n                    if (device.equivalentDeviceId) {\n                        existingDevice = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.equivalentDevice.findUnique({\n                            where: {\n                                id: device.equivalentDeviceId\n                            }\n                        });\n                    }\n                    if (!existingDevice) {\n                        existingDevice = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.equivalentDevice.findUnique({\n                            where: {\n                                serialNumber: device.serialNumber\n                            }\n                        });\n                    }\n                    if (existingDevice) {\n                        // Update existing device location\n                        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.equivalentDevice.update({\n                            where: {\n                                id: existingDevice.id\n                            },\n                            data: {\n                                location: {\n                                    connect: {\n                                        id: targetLocation.id\n                                    }\n                                },\n                                currentLocation: \"IN_WAREHOUSE\",\n                                status: \"AVAILABLE\"\n                            }\n                        });\n                        // Track History\n                        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.equivalentDeviceHistory.create({\n                            data: {\n                                device: {\n                                    connect: {\n                                        id: existingDevice.id\n                                    }\n                                },\n                                previousLocation: existingDevice.currentLocation,\n                                newLocation: \"IN_WAREHOUSE\",\n                                previousLocationId: existingDevice.locationId,\n                                newLocationId: targetLocation.id,\n                                assignedToName: `Kargo ile Giriş (${trackingNumber})`,\n                                notes: `Gelen Kargo: ${trackingNumber} - Gönderen: ${sender} - Depo: ${targetLocation.name}`,\n                                changedBy: \"SYSTEM\",\n                                changedByName: \"Sistem (Otomatik Kargo Girişi)\"\n                            }\n                        });\n                        movedEquivalentCount++;\n                    } else {\n                        skippedNonEquivalentCount++;\n                    }\n                }\n                if (movedEquivalentCount > 0 || skippedNonEquivalentCount > 0) {\n                    console.log(`[cargo-incoming] tracking=${trackingNumber} movedEquivalent=${movedEquivalentCount} skipped=${skippedNonEquivalentCount}`);\n                }\n            } catch (err) {\n                console.error(\"Error auto-assigning incoming cargo to warehouse:\", err);\n            // Don't fail the request, just log error\n            }\n        }\n        // ---------------------------------------------------------\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(cargo, {\n            status: 201\n        });\n    } catch (error) {\n        const p2002Target = error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.PrismaClientKnownRequestError ? error.meta?.target : null;\n        const targetText = Array.isArray(p2002Target) ? p2002Target.join(\",\") : String(p2002Target || \"\");\n        if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.PrismaClientKnownRequestError && error.code === \"P2002\" && (targetText.includes(\"tracking_number\") || targetText.includes(\"trackingNumber\"))) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Bu takip numarasi zaten kayitli. Lutfen farkli bir takip numarasi girin.\"\n            }, {\n                status: 409\n            });\n        }\n        console.error(\"Error creating cargo:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create cargo\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRSxPQUFPTCxPQUFPO1FBQ2QsTUFBTXNLLGNBQWV0SyxpQkFBaUJMLGtEQUFNQSxDQUFDNEssNkJBQTZCLEdBQ3RFLE1BQWU5SixJQUFJLEVBQUUrSixTQUNyQjtRQUNKLE1BQU1DLGFBQWFqSCxNQUFNeUUsT0FBTyxDQUFDcUMsZUFDN0JBLFlBQVlJLElBQUksQ0FBQyxPQUNqQmhHLE9BQU80RixlQUFlO1FBRTFCLElBQ0V0SyxpQkFBaUJMLGtEQUFNQSxDQUFDNEssNkJBQTZCLElBQ3JEdkssTUFBTTJLLElBQUksS0FBSyxXQUViRixDQUFBQSxXQUFXdEssUUFBUSxDQUFDLHNCQUNwQnNLLFdBQVd0SyxRQUFRLENBQUMsaUJBQWdCLEdBRXRDO1lBQ0EsT0FBT2YscURBQVlBLENBQUNrRyxJQUFJLENBQ3RCO2dCQUFFdEYsT0FBTztZQUEyRSxHQUNwRjtnQkFBRUssUUFBUTtZQUFJO1FBRWxCO1FBRUFrRixRQUFRdkYsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBT1oscURBQVlBLENBQUNrRyxJQUFJLENBQ3RCO1lBQUV0RixPQUFPO1FBQXlCLEdBQ2xDO1lBQUVLLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVzdGVrLy4vc3JjL2FwcC9hcGkvY2FyZ28vcm91dGUudHM/NWNiMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uLy4uLy4uL2xpYi9wcmlzbWEnXG5pbXBvcnQgeyBDYXJnb1R5cGUsIENhcmdvU3RhdHVzLCBDYXJnb0Rlc3RpbmF0aW9uLCBEZXZpY2VDb25kaXRpb24sIENhcmdvUHVycG9zZSwgUHJpc21hIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5pbXBvcnQgeyBhcHBlbmRDYXJnb1JlcGFpckhpc3RvcnksIHBhcnNlQ2FyZ29SZXBhaXJNZXRhIH0gZnJvbSAnQC9saWIvY2FyZ28tcmVwYWlyJ1xuXHJcbmNvbnN0IERFRkFVTFRfSFFfTkFNRSA9ICdNZXJrZXogT2ZpcyBEZXBvc3UnXG5cbmZ1bmN0aW9uIGlzVW5rbm93blJlY29yZFN0YXR1c0FyZyhlcnJvcjogdW5rbm93bikge1xuICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSkgcmV0dXJuIGZhbHNlXG4gIHJldHVybiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdVbmtub3duIGFyZ3VtZW50IGByZWNvcmRTdGF0dXNgJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncmVjb3JkX3N0YXR1cycpXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVJlY29yZFN0YXR1cyhzdGF0dXM6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsIG5vdGVzPzogc3RyaW5nIHwgbnVsbCkge1xuICBjb25zdCByYXcgPSB0eXBlb2Ygc3RhdHVzID09PSAnc3RyaW5nJyA/IHN0YXR1cy50b0xvd2VyQ2FzZSgpIDogJ29wZW4nXG4gIGNvbnN0IHsgbWV0YSB9ID0gcGFyc2VDYXJnb1JlcGFpck1ldGEobm90ZXMpXG4gIGlmIChtZXRhPy5hY3RpdmUpIHJldHVybiAnZGV2aWNlX3JlcGFpcidcbiAgaWYgKG1ldGE/LnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgJiYgbWV0YT8uc2hpcG1lbnRTdGF0dXMgPT09ICdyZWFkeV90b19zaGlwJykgcmV0dXJuICdyZWFkeV90b19zaGlwJ1xuICByZXR1cm4gcmF3XG59XG5cbmZ1bmN0aW9uIGlzQ2xvc2VkUmVwYWlyU3RhdHVzKHN0YXR1czogc3RyaW5nKSB7XG4gIHJldHVybiBzdGF0dXMgPT09ICdDT01QTEVURUQnIHx8IHN0YXR1cyA9PT0gJ1VOUkVQQUlSQUJMRSdcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0SGVhZHF1YXJ0ZXJzTG9jYXRpb24oKSB7XG4gIGNvbnN0IGhxID0gYXdhaXQgcHJpc21hLmxvY2F0aW9uLmZpbmRGaXJzdCh7XHJcbiAgICB3aGVyZToge1xyXG4gICAgICBPUjogW1xyXG4gICAgICAgIHsgdHlwZTogJ0hFQURRVUFSVEVSUycgfSxcclxuICAgICAgICB7IG5hbWU6IHsgY29udGFpbnM6ICdNZXJrZXonIH0gfSxcclxuICAgICAgICB7IG5hbWU6IHsgY29udGFpbnM6ICdPZmlzJyB9IH0sXHJcbiAgICAgIF0sXHJcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBvcmRlckJ5OiB7IG5hbWU6ICdhc2MnIH0sXHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIGhxXHJcbn1cclxuXHJcbi8vIEdFVCBhbGwgY2FyZ28gdHJhY2tpbmdzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGhlYWRxdWFydGVycyA9IGF3YWl0IGdldEhlYWRxdWFydGVyc0xvY2F0aW9uKClcclxuICAgIGNvbnN0IGhxTmFtZSA9IGhlYWRxdWFydGVycz8ubmFtZSB8fCBERUZBVUxUX0hRX05BTUVcclxuXHJcbiAgICBsZXQgY2FyZ29zOiBhbnlbXSA9IFtdXG4gICAgdHJ5IHtcbiAgICAgIGNhcmdvcyA9IGF3YWl0IChwcmlzbWEuY2FyZ29UcmFja2luZyBhcyBhbnkpLmZpbmRNYW55KHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGRldmljZXM6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IFtcbiAgICAgICAgICB7IHJlY29yZFN0YXR1czogJ2FzYycgfSxcbiAgICAgICAgICB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgIF0sXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoIWlzVW5rbm93blJlY29yZFN0YXR1c0FyZyhlcnJvcikpIHRocm93IGVycm9yXG5cbiAgICAgIGNhcmdvcyA9IGF3YWl0IHByaXNtYS5jYXJnb1RyYWNraW5nLmZpbmRNYW55KHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGRldmljZXM6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgfVxuXHJcbiAgICBjb25zdCBlbnJpY2hlZCA9IGF3YWl0IFByb21pc2UuYWxsKGNhcmdvcy5tYXAoYXN5bmMgKGNhcmdvKSA9PiB7XG4gICAgICAvLyBWYXJzYXnEsWxhbiBvZmlzIGlzbWlcclxuICAgICAgbGV0IGxvY2F0aW9uTmFtZSA9IGNhcmdvLnR5cGUgPT09ICdJTkNPTUlORycgPyBocU5hbWUgOiBudWxsO1xyXG5cclxuICAgICAgLy8gRcSfZXIga2FyZ28gY2loYXogacOnZXJpeW9yc2EsIGJ1IGNpaGF6bGFyxLFuIGfDvG5jZWwga29udW11bmEgYmFrYWzEsW1cclxuICAgICAgaWYgKGNhcmdvLmRldmljZXMgJiYgY2FyZ28uZGV2aWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBjb25zdCBzZXJpYWxzID0gY2FyZ28uZGV2aWNlc1xuICAgICAgICAgICAgLm1hcCgoZDogYW55KSA9PiBkLnNlcmlhbE51bWJlcilcbiAgICAgICAgICAgIC5maWx0ZXIoKHM6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzIGlzIHN0cmluZyA9PiBCb29sZWFuKHMpKTtcblxyXG4gICAgICAgIGlmIChzZXJpYWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIC8vIEJ1IHNlcmkgbnVtYXJhbGFyxLFuYSBzYWhpcCBjaWhhemxhcsSxbiBnw7xuY2VsIGtvbnVtbGFyxLFuxLEgYnVsYWzEsW1cclxuICAgICAgICAgIGNvbnN0IGRldmljZXNJblN5c3RlbSA9IGF3YWl0IHByaXNtYS5lcXVpdmFsZW50RGV2aWNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgc2VyaWFsTnVtYmVyOiB7IGluOiBzZXJpYWxzIH0gfSxcclxuICAgICAgICAgICAgaW5jbHVkZTogeyBsb2NhdGlvbjogdHJ1ZSB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBDaWhhemxhcsSxbiBidWx1bmR1xJ91IGJlbnplcnNpeiBrb251bWxhcsSxIHRvcGxhXHJcbiAgICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICAgIGRldmljZXNJblN5c3RlbS5mb3JFYWNoKGQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZC5sb2NhdGlvbiAmJiBkLmxvY2F0aW9uLm5hbWUpIHtcclxuICAgICAgICAgICAgICBsb2NhdGlvbnMuYWRkKGQubG9jYXRpb24ubmFtZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5jdXJyZW50TG9jYXRpb24gPT09ICdPTl9TSVRFX1NFUlZJQ0UnKSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb25zLmFkZCgnU2FoYWRhIC8gTcO8xZ90ZXJpZGUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkLmN1cnJlbnRMb2NhdGlvbiA9PT0gJ0FUX0NVU1RPTUVSJykge1xyXG4gICAgICAgICAgICAgIGxvY2F0aW9ucy5hZGQoJ03DvMWfdGVyaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGlmIChsb2NhdGlvbnMuc2l6ZSA9PT0gMSkge1xyXG4gICAgICAgICAgICBsb2NhdGlvbk5hbWUgPSBBcnJheS5mcm9tKGxvY2F0aW9ucylbMF07XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9ucy5zaXplID4gMSkge1xyXG4gICAgICAgICAgICBsb2NhdGlvbk5hbWUgPSAnTXVodGVsaWYgLyBEYcSfxLF0xLFsbcSxxZ8nO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gbG9jYXRpb25zLnNpemUgPT09IDAgaXNlIChoZW7DvHogZW52YW50ZXJlIGdpcm1lbWnFnyB2ZXlhIGXFn2xlxZ9tZW1pxZ8pLCB2YXJzYXnEsWxhbsSxIGtvcnVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHJlcGFpclJvd3MgPSBhd2FpdCBwcmlzbWEuZGV2aWNlUmVwYWlyLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICByZXBhaXJOb3RlczogeyBjb250YWluczogYFtDQVJHTzoke2NhcmdvLmlkfV1gIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgdXBkYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgcmVwYWlyTnVtYmVyOiB0cnVlLFxuICAgICAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgICAgICByZXBhaXJOb3RlczogdHJ1ZSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBkZXZpY2VSZXBhaXJNYXAgPSBuZXcgTWFwPHN0cmluZywgeyBpZDogc3RyaW5nOyByZXBhaXJOdW1iZXI6IHN0cmluZzsgc3RhdHVzOiAnb3BlbicgfCAnY2xvc2VkJzsgc3RhdGU6IHN0cmluZzsgdXBkYXRlZEF0OiBEYXRlIH0+KClcbiAgICAgIGZvciAoY29uc3Qgcm93IG9mIHJlcGFpclJvd3MpIHtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSByb3cucmVwYWlyTm90ZXM/Lm1hdGNoKC9cXFtDQVJHT19ERVZJQ0U6KFteXFxdXSspXFxdLylcbiAgICAgICAgaWYgKCFtYXRjaCkgY29udGludWVcbiAgICAgICAgY29uc3QgY2FyZ29EZXZpY2VJZCA9IG1hdGNoWzFdXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGlzQ2xvc2VkUmVwYWlyU3RhdHVzKHJvdy5zdGF0dXMpID8gJ2Nsb3NlZCcgOiAnb3BlbidcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBkZXZpY2VSZXBhaXJNYXAuZ2V0KGNhcmdvRGV2aWNlSWQpXG4gICAgICAgIGlmIChleGlzdGluZyAmJiBleGlzdGluZy51cGRhdGVkQXQgPiByb3cudXBkYXRlZEF0KSBjb250aW51ZVxuICAgICAgICBkZXZpY2VSZXBhaXJNYXAuc2V0KGNhcmdvRGV2aWNlSWQsIHtcbiAgICAgICAgICBpZDogcm93LmlkLFxuICAgICAgICAgIHJlcGFpck51bWJlcjogcm93LnJlcGFpck51bWJlcixcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgc3RhdGU6IFN0cmluZyhyb3cuc3RhdHVzIHx8ICcnKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogcm93LnVwZGF0ZWRBdCxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgYW55T3BlblJlcGFpciA9IEFycmF5LmZyb20oZGV2aWNlUmVwYWlyTWFwLnZhbHVlcygpKS5zb21lKChpdGVtKSA9PiBpdGVtLnN0YXR1cyA9PT0gJ29wZW4nKVxuICAgICAgY29uc3QgYW55Q2xvc2VkUmVwYWlyID0gQXJyYXkuZnJvbShkZXZpY2VSZXBhaXJNYXAudmFsdWVzKCkpLnNvbWUoKGl0ZW0pID0+IGl0ZW0uc3RhdHVzID09PSAnY2xvc2VkJylcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBhbnlPcGVuUmVwYWlyXG4gICAgICAgID8gJ2RldmljZV9yZXBhaXInXG4gICAgICAgIDogKGFueUNsb3NlZFJlcGFpciA/ICdyZWFkeV90b19zaGlwJyA6IG5vcm1hbGl6ZVJlY29yZFN0YXR1cyhjYXJnby5yZWNvcmRTdGF0dXMsIGNhcmdvLm5vdGVzKSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY2FyZ28sXG4gICAgICAgIHJlY29yZFN0YXR1czogbm9ybWFsaXplZCxcbiAgICAgICAgZGV2aWNlczogY2FyZ28uZGV2aWNlcy5tYXAoKGRldmljZTogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgdGlja2V0ID0gZGV2aWNlUmVwYWlyTWFwLmdldChkZXZpY2UuaWQpXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRldmljZSxcbiAgICAgICAgICAgIHJlcGFpclRpY2tldDogdGlja2V0XG4gICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgaWQ6IHRpY2tldC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlcGFpck51bWJlcjogdGlja2V0LnJlcGFpck51bWJlcixcbiAgICAgICAgICAgICAgICAgIHN0YXR1czogdGlja2V0LnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgIHN0YXRlOiB0aWNrZXQuc3RhdGUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBjdXJyZW50TG9jYXRpb25OYW1lOiBsb2NhdGlvbk5hbWUsXG4gICAgICB9O1xuICAgIH0pKTtcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGVucmljaGVkKVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXJnbzonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBjYXJnbycgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG4vLyBQT1NUIGNyZWF0ZSBuZXcgY2FyZ29cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7XG4gICAgICB0cmFja2luZ051bWJlcixcbiAgICAgIHR5cGUsXG4gICAgICBzdGF0dXMsXG4gICAgICByZWNvcmRTdGF0dXMsXG4gICAgICBzZW5kZXIsXG4gICAgICByZWNlaXZlcixcbiAgICAgIGNhcmdvQ29tcGFueSxcbiAgICAgIHNlbnREYXRlLFxyXG4gICAgICBkZWxpdmVyZWREYXRlLFxyXG4gICAgICBkZXN0aW5hdGlvbixcclxuICAgICAgZGVzdGluYXRpb25BZGRyZXNzLFxyXG4gICAgICBub3RlcyxcclxuICAgICAgZGV2aWNlcyxcclxuICAgIH0gPSBib2R5XHJcblxyXG4gICAgLy8gTWFwIGVudW0gdmFsdWVzXHJcbiAgICBjb25zdCB0eXBlTWFwOiB7IFtrZXk6IHN0cmluZ106IENhcmdvVHlwZSB9ID0ge1xuICAgICAgJ2luY29taW5nJzogQ2FyZ29UeXBlLklOQ09NSU5HLFxuICAgICAgJ291dGdvaW5nJzogQ2FyZ29UeXBlLk9VVEdPSU5HLFxuICAgICAgJ29uX3NpdGVfc2VydmljZSc6IENhcmdvVHlwZS5PTl9TSVRFX1NFUlZJQ0UsXG4gICAgICAnaW5zdGFsbGF0aW9uX3RlYW0nOiBDYXJnb1R5cGUuSU5TVEFMTEFUSU9OX1RFQU0sXG4gICAgfVxuXHJcbiAgICBjb25zdCBzdGF0dXNNYXA6IHsgW2tleTogc3RyaW5nXTogQ2FyZ29TdGF0dXMgfSA9IHtcbiAgICAgICdpbl90cmFuc2l0JzogQ2FyZ29TdGF0dXMuSU5fVFJBTlNJVCxcclxuICAgICAgJ2RlbGl2ZXJlZCc6IENhcmdvU3RhdHVzLkRFTElWRVJFRCxcclxuICAgICAgJ3JldHVybmVkJzogQ2FyZ29TdGF0dXMuUkVUVVJORUQsXHJcbiAgICAgICdsb3N0JzogQ2FyZ29TdGF0dXMuTE9TVCxcclxuICAgICAgJ2RhbWFnZWQnOiBDYXJnb1N0YXR1cy5EQU1BR0VELFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRlc3RpbmF0aW9uTWFwOiB7IFtrZXk6IHN0cmluZ106IENhcmdvRGVzdGluYXRpb24gfSA9IHtcbiAgICAgICdjdXN0b21lcic6IENhcmdvRGVzdGluYXRpb24uQ1VTVE9NRVIsXHJcbiAgICAgICdkaXN0cmlidXRvcic6IENhcmdvRGVzdGluYXRpb24uRElTVFJJQlVUT1IsXHJcbiAgICAgICdicmFuY2gnOiBDYXJnb0Rlc3RpbmF0aW9uLkJSQU5DSCxcclxuICAgICAgJ2hlYWRxdWFydGVycyc6IENhcmdvRGVzdGluYXRpb24uSEVBRFFVQVJURVJTLFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvbmRpdGlvbk1hcDogeyBba2V5OiBzdHJpbmddOiBEZXZpY2VDb25kaXRpb24gfSA9IHtcclxuICAgICAgJ25ldyc6IERldmljZUNvbmRpdGlvbi5ORVcsXHJcbiAgICAgICd1c2VkJzogRGV2aWNlQ29uZGl0aW9uLlVTRUQsXHJcbiAgICAgICdyZWZ1cmJpc2hlZCc6IERldmljZUNvbmRpdGlvbi5SRUZVUkJJU0hFRCxcclxuICAgICAgJ2RhbWFnZWQnOiBEZXZpY2VDb25kaXRpb24uREFNQUdFRCxcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwdXJwb3NlTWFwOiB7IFtrZXk6IHN0cmluZ106IENhcmdvUHVycG9zZSB9ID0ge1xuICAgICAgJ2luc3RhbGxhdGlvbic6IENhcmdvUHVycG9zZS5JTlNUQUxMQVRJT04sXG4gICAgICAncmVwbGFjZW1lbnQnOiBDYXJnb1B1cnBvc2UuUkVQTEFDRU1FTlQsXG4gICAgICAncmVwYWlyJzogQ2FyZ29QdXJwb3NlLlJFUEFJUixcbiAgICAgICdyZXR1cm4nOiBDYXJnb1B1cnBvc2UuUkVUVVJOLFxuICAgIH1cblxuICAgIGNvbnN0IHJlY29yZFN0YXR1c01hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAgICdvcGVuJzogJ09QRU4nLFxuICAgICAgJ29uX2hvbGQnOiAnT05fSE9MRCcsXG4gICAgICAnY2xvc2VkJzogJ0NMT1NFRCcsXG4gICAgICAnZGV2aWNlX3JlcGFpcic6ICdPTl9IT0xEJyxcbiAgICB9XG5cclxuICAgIGNvbnN0IG5vcm1hbGl6ZWRUcmFja2luZ051bWJlciA9IFN0cmluZyh0cmFja2luZ051bWJlciB8fCAnJykudHJpbSgpXG4gICAgaWYgKCFub3JtYWxpemVkVHJhY2tpbmdOdW1iZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1Rha2lwIG51bWFyYXNpIHpvcnVubHVkdXIuJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBleGlzdGluZ0NhcmdvID0gYXdhaXQgcHJpc21hLmNhcmdvVHJhY2tpbmcuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyB0cmFja2luZ051bWJlcjogbm9ybWFsaXplZFRyYWNraW5nTnVtYmVyIH0sXG4gICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUgfSxcbiAgICB9KVxuXG4gICAgaWYgKGV4aXN0aW5nQ2FyZ28pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0J1IHRha2lwIG51bWFyYXNpIHphdGVuIGtheWl0bGkuIEx1dGZlbiBmYXJrbGkgYmlyIHRha2lwIG51bWFyYXNpIGdpcmluLicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwOSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgZGV2aWNlTGlzdCA9IEFycmF5LmlzQXJyYXkoZGV2aWNlcykgPyBkZXZpY2VzIDogW11cblxuICAgIGNvbnN0IHJlc29sdmVkVHlwZSA9IHR5cGVNYXBbdHlwZT8udG9Mb3dlckNhc2UoKV0gfHwgQ2FyZ29UeXBlLk9VVEdPSU5HXG4gICAgY29uc3QgaXNJbmNvbWluZyA9IHJlc29sdmVkVHlwZSA9PT0gQ2FyZ29UeXBlLklOQ09NSU5HXG5cbiAgICBjb25zdCBjcmVhdGVEYXRhOiBhbnkgPSB7XG4gICAgICB0cmFja2luZ051bWJlcjogbm9ybWFsaXplZFRyYWNraW5nTnVtYmVyLFxuICAgICAgdHlwZTogcmVzb2x2ZWRUeXBlLFxuICAgICAgc3RhdHVzOiBzdGF0dXNNYXBbc3RhdHVzPy50b0xvd2VyQ2FzZSgpXSB8fCBDYXJnb1N0YXR1cy5JTl9UUkFOU0lULFxuICAgICAgc2VuZGVyLFxuICAgICAgcmVjZWl2ZXIsXG4gICAgICBjYXJnb0NvbXBhbnk6IGNhcmdvQ29tcGFueSB8fCAnJyxcbiAgICAgIHNlbnREYXRlOiBzZW50RGF0ZSA/IG5ldyBEYXRlKHNlbnREYXRlKSA6IG51bGwsXG4gICAgICBkZWxpdmVyZWREYXRlOiBkZWxpdmVyZWREYXRlID8gbmV3IERhdGUoZGVsaXZlcmVkRGF0ZSkgOiBudWxsLFxuICAgICAgZGVzdGluYXRpb246IGlzSW5jb21pbmdcbiAgICAgICAgPyBDYXJnb0Rlc3RpbmF0aW9uLkhFQURRVUFSVEVSU1xuICAgICAgICA6IChkZXN0aW5hdGlvbk1hcFtkZXN0aW5hdGlvbj8udG9Mb3dlckNhc2UoKV0gfHwgQ2FyZ29EZXN0aW5hdGlvbi5DVVNUT01FUiksXG4gICAgICBkZXN0aW5hdGlvbkFkZHJlc3M6IGlzSW5jb21pbmdcbiAgICAgICAgPyAodHlwZW9mIGRlc3RpbmF0aW9uQWRkcmVzcyA9PT0gJ3N0cmluZycgJiYgZGVzdGluYXRpb25BZGRyZXNzLnRyaW0oKSA/IGRlc3RpbmF0aW9uQWRkcmVzcyA6IERFRkFVTFRfSFFfTkFNRSlcbiAgICAgICAgOiBkZXN0aW5hdGlvbkFkZHJlc3MsXG4gICAgICBub3RlcyxcbiAgICAgIGRldmljZXM6IHtcbiAgICAgICAgY3JlYXRlOiBkZXZpY2VMaXN0Lm1hcCgoZGV2aWNlOiBhbnkpID0+ICh7XG4gICAgICAgICAgZGV2aWNlTmFtZTogZGV2aWNlLmRldmljZU5hbWUsXG4gICAgICAgICAgbW9kZWw6IGRldmljZS5tb2RlbCxcbiAgICAgICAgICBzZXJpYWxOdW1iZXI6IGRldmljZS5zZXJpYWxOdW1iZXIsXG4gICAgICAgICAgcXVhbnRpdHk6IGRldmljZS5xdWFudGl0eSB8fCAxLFxuICAgICAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uTWFwW2RldmljZS5jb25kaXRpb24/LnRvTG93ZXJDYXNlKCldIHx8IERldmljZUNvbmRpdGlvbi5ORVcsXG4gICAgICAgICAgcHVycG9zZTogcHVycG9zZU1hcFtkZXZpY2UucHVycG9zZT8udG9Mb3dlckNhc2UoKV0gfHwgQ2FyZ29QdXJwb3NlLklOU1RBTExBVElPTixcbiAgICAgICAgfSkpLFxuICAgICAgfSxcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlY29yZFN0YXR1cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IG1hcHBlZFN0YXR1cyA9IHJlY29yZFN0YXR1c01hcFtyZWNvcmRTdGF0dXMudG9Mb3dlckNhc2UoKV1cbiAgICAgIGlmIChtYXBwZWRTdGF0dXMpIHtcbiAgICAgICAgY3JlYXRlRGF0YS5yZWNvcmRTdGF0dXMgPSBtYXBwZWRTdGF0dXNcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoU3RyaW5nKHJlY29yZFN0YXR1cyB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gJ2RldmljZV9yZXBhaXInKSB7XG4gICAgICBjcmVhdGVEYXRhLm5vdGVzID0gYXBwZW5kQ2FyZ29SZXBhaXJIaXN0b3J5KFxuICAgICAgICB0eXBlb2Ygbm90ZXMgPT09ICdzdHJpbmcnID8gbm90ZXMgOiAnJyxcbiAgICAgICAge1xuICAgICAgICAgIGF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgYWN0aW9uOiAnS2FyZ28ga2F5ZGkgY2loYXogdGFtaXJpIGR1cnVtdW5kYSBvbHVzdHVydWxkdScsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBsZXQgY2FyZ286IGFueVxuICAgIHRyeSB7XG4gICAgICBjYXJnbyA9IGF3YWl0IChwcmlzbWEuY2FyZ29UcmFja2luZyBhcyBhbnkpLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IGNyZWF0ZURhdGEsXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBkZXZpY2VzOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKCFpc1Vua25vd25SZWNvcmRTdGF0dXNBcmcoZXJyb3IpKSB0aHJvdyBlcnJvclxuXG4gICAgICBkZWxldGUgY3JlYXRlRGF0YS5yZWNvcmRTdGF0dXNcbiAgICAgIGNhcmdvID0gYXdhaXQgcHJpc21hLmNhcmdvVHJhY2tpbmcuY3JlYXRlKHtcbiAgICAgICAgZGF0YTogY3JlYXRlRGF0YSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGRldmljZXM6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH1cblxyXG4gICAgLy8gLS0tIEFVVE9NQVRJQyBXQVJFSE9VU0UgQVNTSUdOTUVOVCBGT1IgSU5DT01JTkcgQ0FSR08gLS0tXHJcbiAgICBpZiAocmVzb2x2ZWRUeXBlID09PSBDYXJnb1R5cGUuSU5DT01JTkcpIHtcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IHRhcmdldExvY2F0aW9uO1xyXG5cclxuICAgICAgICAvLyAxLiBEZXRlcm1pbmUgVGFyZ2V0IExvY2F0aW9uXHJcbiAgICAgICAgaWYgKGJvZHkudGFyZ2V0TG9jYXRpb25JZCkge1xyXG4gICAgICAgICAgdGFyZ2V0TG9jYXRpb24gPSBhd2FpdCBwcmlzbWEubG9jYXRpb24uZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBib2R5LnRhcmdldExvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGYWxsYmFjayB0byBcIk9mZmljZVwiIGlmIG5vIHRhcmdldCBzZWxlY3RlZCBvciBub3QgZm91bmRcclxuICAgICAgICBpZiAoIXRhcmdldExvY2F0aW9uKSB7XHJcbiAgICAgICAgICB0YXJnZXRMb2NhdGlvbiA9IGF3YWl0IGdldEhlYWRxdWFydGVyc0xvY2F0aW9uKCk7XHJcbiAgICAgICAgICBpZiAoIXRhcmdldExvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHRhcmdldExvY2F0aW9uID0gYXdhaXQgcHJpc21hLmxvY2F0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogREVGQVVMVF9IUV9OQU1FLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ0hFQURRVUFSVEVSUycsXHJcbiAgICAgICAgICAgICAgICBhZGRyZXNzOiAnT3RvbWF0aWsgT2x1xZ90dXJ1bGR1JyxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAyLiBQcm9jZXNzIG9ubHkgcHJlZGVmaW5lZCBlcXVpdmFsZW50IGRldmljZXNcbiAgICAgICAgbGV0IG1vdmVkRXF1aXZhbGVudENvdW50ID0gMFxuICAgICAgICBsZXQgc2tpcHBlZE5vbkVxdWl2YWxlbnRDb3VudCA9IDBcblxuICAgICAgICBmb3IgKGNvbnN0IGRldmljZSBvZiBkZXZpY2VMaXN0KSB7XG4gICAgICAgICAgY29uc3Qgc291cmNlVHlwZSA9IFN0cmluZyhkZXZpY2U/LnNvdXJjZVR5cGUgfHwgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICBpZiAoc291cmNlVHlwZSAhPT0gJ2VxdWl2YWxlbnQnKSB7XG4gICAgICAgICAgICBza2lwcGVkTm9uRXF1aXZhbGVudENvdW50KytcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFkZXZpY2Uuc2VyaWFsTnVtYmVyIHx8IGRldmljZS5zZXJpYWxOdW1iZXIubGVuZ3RoIDwgMykgY29udGludWU7XG5cbiAgICAgICAgICBsZXQgZXhpc3RpbmdEZXZpY2UgPSBudWxsXG4gICAgICAgICAgaWYgKGRldmljZS5lcXVpdmFsZW50RGV2aWNlSWQpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nRGV2aWNlID0gYXdhaXQgcHJpc21hLmVxdWl2YWxlbnREZXZpY2UuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkZXZpY2UuZXF1aXZhbGVudERldmljZUlkIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFleGlzdGluZ0RldmljZSkge1xuICAgICAgICAgICAgZXhpc3RpbmdEZXZpY2UgPSBhd2FpdCBwcmlzbWEuZXF1aXZhbGVudERldmljZS5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgICAgd2hlcmU6IHsgc2VyaWFsTnVtYmVyOiBkZXZpY2Uuc2VyaWFsTnVtYmVyIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV4aXN0aW5nRGV2aWNlKSB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgZGV2aWNlIGxvY2F0aW9uXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZXF1aXZhbGVudERldmljZS51cGRhdGUoe1xuICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhpc3RpbmdEZXZpY2UuaWQgfSxcbiAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IHsgY29ubmVjdDogeyBpZDogdGFyZ2V0TG9jYXRpb24uaWQgfSB9LFxyXG4gICAgICAgICAgICAgICAgY3VycmVudExvY2F0aW9uOiAnSU5fV0FSRUhPVVNFJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogJ0FWQUlMQUJMRScsXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8gVHJhY2sgSGlzdG9yeVxyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZXF1aXZhbGVudERldmljZUhpc3RvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBkZXZpY2U6IHsgY29ubmVjdDogeyBpZDogZXhpc3RpbmdEZXZpY2UuaWQgfSB9LFxyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNMb2NhdGlvbjogZXhpc3RpbmdEZXZpY2UuY3VycmVudExvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgbmV3TG9jYXRpb246ICdJTl9XQVJFSE9VU0UnLFxyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNMb2NhdGlvbklkOiBleGlzdGluZ0RldmljZS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgbmV3TG9jYXRpb25JZDogdGFyZ2V0TG9jYXRpb24uaWQsXHJcbiAgICAgICAgICAgICAgICBhc3NpZ25lZFRvTmFtZTogYEthcmdvIGlsZSBHaXJpxZ8gKCR7dHJhY2tpbmdOdW1iZXJ9KWAsXHJcbiAgICAgICAgICAgICAgICBub3RlczogYEdlbGVuIEthcmdvOiAke3RyYWNraW5nTnVtYmVyfSAtIEfDtm5kZXJlbjogJHtzZW5kZXJ9IC0gRGVwbzogJHt0YXJnZXRMb2NhdGlvbi5uYW1lfWAsXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VkQnk6ICdTWVNURU0nLFxuICAgICAgICAgICAgICAgIGNoYW5nZWRCeU5hbWU6ICdTaXN0ZW0gKE90b21hdGlrIEthcmdvIEdpcmnFn2kpJyxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbW92ZWRFcXVpdmFsZW50Q291bnQrK1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBza2lwcGVkTm9uRXF1aXZhbGVudENvdW50KytcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW92ZWRFcXVpdmFsZW50Q291bnQgPiAwIHx8IHNraXBwZWROb25FcXVpdmFsZW50Q291bnQgPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgW2NhcmdvLWluY29taW5nXSB0cmFja2luZz0ke3RyYWNraW5nTnVtYmVyfSBtb3ZlZEVxdWl2YWxlbnQ9JHttb3ZlZEVxdWl2YWxlbnRDb3VudH0gc2tpcHBlZD0ke3NraXBwZWROb25FcXVpdmFsZW50Q291bnR9YFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGF1dG8tYXNzaWduaW5nIGluY29taW5nIGNhcmdvIHRvIHdhcmVob3VzZTonLCBlcnIpXG4gICAgICAgIC8vIERvbid0IGZhaWwgdGhlIHJlcXVlc3QsIGp1c3QgbG9nIGVycm9yXG4gICAgICB9XG4gICAgfVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihjYXJnbywgeyBzdGF0dXM6IDIwMSB9KVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgcDIwMDJUYXJnZXQgPSAoZXJyb3IgaW5zdGFuY2VvZiBQcmlzbWEuUHJpc21hQ2xpZW50S25vd25SZXF1ZXN0RXJyb3JcbiAgICAgID8gKGVycm9yIGFzIGFueSkubWV0YT8udGFyZ2V0XG4gICAgICA6IG51bGwpXG4gICAgY29uc3QgdGFyZ2V0VGV4dCA9IEFycmF5LmlzQXJyYXkocDIwMDJUYXJnZXQpXG4gICAgICA/IHAyMDAyVGFyZ2V0LmpvaW4oJywnKVxuICAgICAgOiBTdHJpbmcocDIwMDJUYXJnZXQgfHwgJycpXG5cbiAgICBpZiAoXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIFByaXNtYS5QcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvciAmJlxuICAgICAgZXJyb3IuY29kZSA9PT0gJ1AyMDAyJyAmJlxuICAgICAgKFxuICAgICAgICB0YXJnZXRUZXh0LmluY2x1ZGVzKCd0cmFja2luZ19udW1iZXInKSB8fFxuICAgICAgICB0YXJnZXRUZXh0LmluY2x1ZGVzKCd0cmFja2luZ051bWJlcicpXG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdCdSB0YWtpcCBudW1hcmFzaSB6YXRlbiBrYXlpdGxpLiBMdXRmZW4gZmFya2xpIGJpciB0YWtpcCBudW1hcmFzaSBnaXJpbi4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDkgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhcmdvOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGNhcmdvJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwcmlzbWEiLCJDYXJnb1R5cGUiLCJDYXJnb1N0YXR1cyIsIkNhcmdvRGVzdGluYXRpb24iLCJEZXZpY2VDb25kaXRpb24iLCJDYXJnb1B1cnBvc2UiLCJQcmlzbWEiLCJhcHBlbmRDYXJnb1JlcGFpckhpc3RvcnkiLCJwYXJzZUNhcmdvUmVwYWlyTWV0YSIsIkRFRkFVTFRfSFFfTkFNRSIsImlzVW5rbm93blJlY29yZFN0YXR1c0FyZyIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJub3JtYWxpemVSZWNvcmRTdGF0dXMiLCJzdGF0dXMiLCJub3RlcyIsInJhdyIsInRvTG93ZXJDYXNlIiwibWV0YSIsImFjdGl2ZSIsInNoaXBtZW50U3RhdHVzIiwiaXNDbG9zZWRSZXBhaXJTdGF0dXMiLCJnZXRIZWFkcXVhcnRlcnNMb2NhdGlvbiIsImhxIiwibG9jYXRpb24iLCJmaW5kRmlyc3QiLCJ3aGVyZSIsIk9SIiwidHlwZSIsIm5hbWUiLCJjb250YWlucyIsIm9yZGVyQnkiLCJHRVQiLCJyZXF1ZXN0IiwiaGVhZHF1YXJ0ZXJzIiwiaHFOYW1lIiwiY2FyZ29zIiwiY2FyZ29UcmFja2luZyIsImZpbmRNYW55IiwiaW5jbHVkZSIsImRldmljZXMiLCJyZWNvcmRTdGF0dXMiLCJjcmVhdGVkQXQiLCJlbnJpY2hlZCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJjYXJnbyIsImxvY2F0aW9uTmFtZSIsImxlbmd0aCIsInNlcmlhbHMiLCJkIiwic2VyaWFsTnVtYmVyIiwiZmlsdGVyIiwicyIsIkJvb2xlYW4iLCJkZXZpY2VzSW5TeXN0ZW0iLCJlcXVpdmFsZW50RGV2aWNlIiwiaW4iLCJsb2NhdGlvbnMiLCJTZXQiLCJmb3JFYWNoIiwiYWRkIiwiY3VycmVudExvY2F0aW9uIiwic2l6ZSIsIkFycmF5IiwiZnJvbSIsInJlcGFpclJvd3MiLCJkZXZpY2VSZXBhaXIiLCJyZXBhaXJOb3RlcyIsImlkIiwidXBkYXRlZEF0Iiwic2VsZWN0IiwicmVwYWlyTnVtYmVyIiwiZGV2aWNlUmVwYWlyTWFwIiwiTWFwIiwicm93IiwibWF0Y2giLCJjYXJnb0RldmljZUlkIiwiZXhpc3RpbmciLCJnZXQiLCJzZXQiLCJzdGF0ZSIsIlN0cmluZyIsImFueU9wZW5SZXBhaXIiLCJ2YWx1ZXMiLCJzb21lIiwiaXRlbSIsImFueUNsb3NlZFJlcGFpciIsIm5vcm1hbGl6ZWQiLCJkZXZpY2UiLCJ0aWNrZXQiLCJyZXBhaXJUaWNrZXQiLCJ1bmRlZmluZWQiLCJjdXJyZW50TG9jYXRpb25OYW1lIiwianNvbiIsImNvbnNvbGUiLCJQT1NUIiwiYm9keSIsInRyYWNraW5nTnVtYmVyIiwic2VuZGVyIiwicmVjZWl2ZXIiLCJjYXJnb0NvbXBhbnkiLCJzZW50RGF0ZSIsImRlbGl2ZXJlZERhdGUiLCJkZXN0aW5hdGlvbiIsImRlc3RpbmF0aW9uQWRkcmVzcyIsInR5cGVNYXAiLCJJTkNPTUlORyIsIk9VVEdPSU5HIiwiT05fU0lURV9TRVJWSUNFIiwiSU5TVEFMTEFUSU9OX1RFQU0iLCJzdGF0dXNNYXAiLCJJTl9UUkFOU0lUIiwiREVMSVZFUkVEIiwiUkVUVVJORUQiLCJMT1NUIiwiREFNQUdFRCIsImRlc3RpbmF0aW9uTWFwIiwiQ1VTVE9NRVIiLCJESVNUUklCVVRPUiIsIkJSQU5DSCIsIkhFQURRVUFSVEVSUyIsImNvbmRpdGlvbk1hcCIsIk5FVyIsIlVTRUQiLCJSRUZVUkJJU0hFRCIsInB1cnBvc2VNYXAiLCJJTlNUQUxMQVRJT04iLCJSRVBMQUNFTUVOVCIsIlJFUEFJUiIsIlJFVFVSTiIsInJlY29yZFN0YXR1c01hcCIsIm5vcm1hbGl6ZWRUcmFja2luZ051bWJlciIsInRyaW0iLCJleGlzdGluZ0NhcmdvIiwiZmluZFVuaXF1ZSIsImRldmljZUxpc3QiLCJpc0FycmF5IiwicmVzb2x2ZWRUeXBlIiwiaXNJbmNvbWluZyIsImNyZWF0ZURhdGEiLCJEYXRlIiwiY3JlYXRlIiwiZGV2aWNlTmFtZSIsIm1vZGVsIiwicXVhbnRpdHkiLCJjb25kaXRpb24iLCJwdXJwb3NlIiwibWFwcGVkU3RhdHVzIiwiYXQiLCJ0b0lTT1N0cmluZyIsImFjdGlvbiIsImRhdGEiLCJ0YXJnZXRMb2NhdGlvbiIsInRhcmdldExvY2F0aW9uSWQiLCJhZGRyZXNzIiwibW92ZWRFcXVpdmFsZW50Q291bnQiLCJza2lwcGVkTm9uRXF1aXZhbGVudENvdW50Iiwic291cmNlVHlwZSIsImV4aXN0aW5nRGV2aWNlIiwiZXF1aXZhbGVudERldmljZUlkIiwidXBkYXRlIiwiY29ubmVjdCIsImVxdWl2YWxlbnREZXZpY2VIaXN0b3J5IiwicHJldmlvdXNMb2NhdGlvbiIsIm5ld0xvY2F0aW9uIiwicHJldmlvdXNMb2NhdGlvbklkIiwibG9jYXRpb25JZCIsIm5ld0xvY2F0aW9uSWQiLCJhc3NpZ25lZFRvTmFtZSIsImNoYW5nZWRCeSIsImNoYW5nZWRCeU5hbWUiLCJsb2ciLCJlcnIiLCJwMjAwMlRhcmdldCIsIlByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yIiwidGFyZ2V0IiwidGFyZ2V0VGV4dCIsImpvaW4iLCJjb2RlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/cargo/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/cargo-repair.ts":
/*!*********************************!*\
  !*** ./src/lib/cargo-repair.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appendCargoRepairHistory: () => (/* binding */ appendCargoRepairHistory),\n/* harmony export */   parseCargoRepairMeta: () => (/* binding */ parseCargoRepairMeta),\n/* harmony export */   upsertCargoRepairMeta: () => (/* binding */ upsertCargoRepairMeta)\n/* harmony export */ });\nconst META_TAG = \"[[CARGO_REPAIR_META]]\";\nconst defaultMeta = ()=>({\n        active: true,\n        technicianName: \"\",\n        operations: [],\n        imageUrl: \"\",\n        note: \"\",\n        spareParts: [],\n        approvalStatus: \"pending\",\n        approvalAt: \"\",\n        approvalNote: \"\",\n        laborCost: 0,\n        partsCost: 0,\n        distributorCost: 0,\n        internalServiceCost: 0,\n        totalCost: 0,\n        status: \"pending\",\n        shipmentStatus: \"pending\",\n        history: [],\n        updatedAt: new Date().toISOString()\n    });\nfunction parseCargoRepairMeta(notes) {\n    const text = (notes || \"\").trim();\n    if (!text.includes(META_TAG)) {\n        return {\n            cleanNotes: text,\n            meta: null\n        };\n    }\n    const lines = text.split(\"\\n\");\n    const clean = [];\n    let meta = null;\n    for (const line of lines){\n        if (!line.startsWith(META_TAG)) {\n            clean.push(line);\n            continue;\n        }\n        const payload = line.slice(META_TAG.length).trim();\n        try {\n            const parsed = JSON.parse(payload);\n            meta = {\n                ...defaultMeta(),\n                ...parsed,\n                history: Array.isArray(parsed?.history) ? parsed.history : [],\n                operations: Array.isArray(parsed?.operations) ? parsed.operations : [],\n                spareParts: Array.isArray(parsed?.spareParts) ? parsed.spareParts : [],\n                approvalStatus: parsed?.approvalStatus === \"approved\" || parsed?.approvalStatus === \"rejected\" ? parsed.approvalStatus : \"pending\",\n                shipmentStatus: parsed?.shipmentStatus === \"ready_to_ship\" || parsed?.shipmentStatus === \"shipped\" ? parsed.shipmentStatus : \"pending\"\n            };\n        } catch  {\n            meta = null;\n        }\n    }\n    return {\n        cleanNotes: clean.join(\"\\n\").trim(),\n        meta\n    };\n}\nfunction upsertCargoRepairMeta(notes, input) {\n    const { cleanNotes, meta } = parseCargoRepairMeta(notes);\n    const next = {\n        ...meta || defaultMeta(),\n        ...input,\n        operations: Array.isArray(input.operations) ? input.operations : meta?.operations || [],\n        spareParts: Array.isArray(input.spareParts) ? input.spareParts : meta?.spareParts || [],\n        history: Array.isArray(input.history) ? input.history : meta?.history || [],\n        updatedAt: new Date().toISOString()\n    };\n    const parts = [\n        cleanNotes,\n        `${META_TAG}${JSON.stringify(next)}`\n    ].filter(Boolean);\n    return parts.join(\"\\n\");\n}\nfunction appendCargoRepairHistory(notes, item, patch) {\n    const { meta } = parseCargoRepairMeta(notes);\n    const base = meta || defaultMeta();\n    const history = [\n        ...base.history,\n        item\n    ];\n    return upsertCargoRepairMeta(notes, {\n        ...patch,\n        history\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixTQUFTLEVBQUV1QyxLQUFLUyxTQUFTLENBQUNGLE1BQU0sQ0FBQztLQUFDLENBQUNHLE1BQU0sQ0FBQ0M7SUFDeEUsT0FBT0gsTUFBTUosSUFBSSxDQUFDO0FBQ3BCO0FBRU8sU0FBU1EseUJBQ2Q1QixLQUFnQyxFQUNoQzZCLElBQTRCLEVBQzVCQyxLQUFnQztJQUVoQyxNQUFNLEVBQUV6QixJQUFJLEVBQUUsR0FBR04scUJBQXFCQztJQUN0QyxNQUFNK0IsT0FBTzFCLFFBQVEzQjtJQUNyQixNQUFNaUIsVUFBVTtXQUFJb0MsS0FBS3BDLE9BQU87UUFBRWtDO0tBQUs7SUFDdkMsT0FBT1Isc0JBQXNCckIsT0FBTztRQUNsQyxHQUFHOEIsS0FBSztRQUNSbkM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVzdGVrLy4vc3JjL2xpYi9jYXJnby1yZXBhaXIudHM/MzZlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIENhcmdvUmVwYWlySGlzdG9yeUl0ZW0ge1xuICBhdDogc3RyaW5nXG4gIGFjdGlvbjogc3RyaW5nXG4gIHRlY2huaWNpYW5OYW1lPzogc3RyaW5nXG4gIG9wZXJhdGlvbnM/OiBzdHJpbmdbXVxuICBub3RlPzogc3RyaW5nXG4gIGFwcHJvdmFsU3RhdHVzPzogQ2FyZ29SZXBhaXJBcHByb3ZhbFN0YXR1c1xuICBhcHByb3ZhbE5vdGU/OiBzdHJpbmdcbiAgbGFib3JDb3N0PzogbnVtYmVyXG4gIHBhcnRzQ29zdD86IG51bWJlclxuICBkaXN0cmlidXRvckNvc3Q/OiBudW1iZXJcbiAgaW50ZXJuYWxTZXJ2aWNlQ29zdD86IG51bWJlclxuICB0b3RhbENvc3Q/OiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJnb1JlcGFpclNwYXJlUGFydEl0ZW0ge1xuICBuYW1lOiBzdHJpbmdcbiAgcXVhbnRpdHk6IG51bWJlclxuICB1bml0Q29zdDogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZ29SZXBhaXJNZXRhIHtcbiAgYWN0aXZlOiBib29sZWFuXG4gIHRlY2huaWNpYW5JZD86IHN0cmluZ1xuICB0ZWNobmljaWFuTmFtZT86IHN0cmluZ1xuICBvcGVyYXRpb25zOiBzdHJpbmdbXVxuICBpbWFnZVVybD86IHN0cmluZ1xuICBub3RlPzogc3RyaW5nXG4gIHNwYXJlUGFydHM6IENhcmdvUmVwYWlyU3BhcmVQYXJ0SXRlbVtdXG4gIGFwcHJvdmFsU3RhdHVzOiBDYXJnb1JlcGFpckFwcHJvdmFsU3RhdHVzXG4gIGFwcHJvdmFsQXQ/OiBzdHJpbmdcbiAgYXBwcm92YWxOb3RlPzogc3RyaW5nXG4gIGxhYm9yQ29zdD86IG51bWJlclxuICBwYXJ0c0Nvc3Q/OiBudW1iZXJcbiAgZGlzdHJpYnV0b3JDb3N0PzogbnVtYmVyXG4gIGludGVybmFsU2VydmljZUNvc3Q/OiBudW1iZXJcbiAgdG90YWxDb3N0PzogbnVtYmVyXG4gIHN0YXR1czogJ3BlbmRpbmcnIHwgJ2luX3Byb2dyZXNzJyB8ICdjb21wbGV0ZWQnXG4gIHNoaXBtZW50U3RhdHVzOiAncGVuZGluZycgfCAncmVhZHlfdG9fc2hpcCcgfCAnc2hpcHBlZCdcbiAgaGlzdG9yeTogQ2FyZ29SZXBhaXJIaXN0b3J5SXRlbVtdXG4gIHVwZGF0ZWRBdDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIENhcmdvUmVwYWlyQXBwcm92YWxTdGF0dXMgPSAncGVuZGluZycgfCAnYXBwcm92ZWQnIHwgJ3JlamVjdGVkJ1xuXG5jb25zdCBNRVRBX1RBRyA9ICdbW0NBUkdPX1JFUEFJUl9NRVRBXV0nXG5cbmNvbnN0IGRlZmF1bHRNZXRhID0gKCk6IENhcmdvUmVwYWlyTWV0YSA9PiAoe1xuICBhY3RpdmU6IHRydWUsXG4gIHRlY2huaWNpYW5OYW1lOiAnJyxcbiAgb3BlcmF0aW9uczogW10sXG4gIGltYWdlVXJsOiAnJyxcbiAgbm90ZTogJycsXG4gIHNwYXJlUGFydHM6IFtdLFxuICBhcHByb3ZhbFN0YXR1czogJ3BlbmRpbmcnLFxuICBhcHByb3ZhbEF0OiAnJyxcbiAgYXBwcm92YWxOb3RlOiAnJyxcbiAgbGFib3JDb3N0OiAwLFxuICBwYXJ0c0Nvc3Q6IDAsXG4gIGRpc3RyaWJ1dG9yQ29zdDogMCxcbiAgaW50ZXJuYWxTZXJ2aWNlQ29zdDogMCxcbiAgdG90YWxDb3N0OiAwLFxuICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgc2hpcG1lbnRTdGF0dXM6ICdwZW5kaW5nJyxcbiAgaGlzdG9yeTogW10sXG4gIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxufSlcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2FyZ29SZXBhaXJNZXRhKG5vdGVzPzogc3RyaW5nIHwgbnVsbCk6IHtcbiAgY2xlYW5Ob3Rlczogc3RyaW5nXG4gIG1ldGE6IENhcmdvUmVwYWlyTWV0YSB8IG51bGxcbn0ge1xuICBjb25zdCB0ZXh0ID0gKG5vdGVzIHx8ICcnKS50cmltKClcbiAgaWYgKCF0ZXh0LmluY2x1ZGVzKE1FVEFfVEFHKSkge1xuICAgIHJldHVybiB7IGNsZWFuTm90ZXM6IHRleHQsIG1ldGE6IG51bGwgfVxuICB9XG5cbiAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKVxuICBjb25zdCBjbGVhbjogc3RyaW5nW10gPSBbXVxuICBsZXQgbWV0YTogQ2FyZ29SZXBhaXJNZXRhIHwgbnVsbCA9IG51bGxcblxuICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICBpZiAoIWxpbmUuc3RhcnRzV2l0aChNRVRBX1RBRykpIHtcbiAgICAgIGNsZWFuLnB1c2gobGluZSlcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgY29uc3QgcGF5bG9hZCA9IGxpbmUuc2xpY2UoTUVUQV9UQUcubGVuZ3RoKS50cmltKClcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShwYXlsb2FkKVxuICAgICAgbWV0YSA9IHtcbiAgICAgICAgLi4uZGVmYXVsdE1ldGEoKSxcbiAgICAgICAgLi4ucGFyc2VkLFxuICAgICAgICBoaXN0b3J5OiBBcnJheS5pc0FycmF5KHBhcnNlZD8uaGlzdG9yeSkgPyBwYXJzZWQuaGlzdG9yeSA6IFtdLFxuICAgICAgICBvcGVyYXRpb25zOiBBcnJheS5pc0FycmF5KHBhcnNlZD8ub3BlcmF0aW9ucykgPyBwYXJzZWQub3BlcmF0aW9ucyA6IFtdLFxuICAgICAgICBzcGFyZVBhcnRzOiBBcnJheS5pc0FycmF5KHBhcnNlZD8uc3BhcmVQYXJ0cykgPyBwYXJzZWQuc3BhcmVQYXJ0cyA6IFtdLFxuICAgICAgICBhcHByb3ZhbFN0YXR1czpcbiAgICAgICAgICBwYXJzZWQ/LmFwcHJvdmFsU3RhdHVzID09PSAnYXBwcm92ZWQnIHx8IHBhcnNlZD8uYXBwcm92YWxTdGF0dXMgPT09ICdyZWplY3RlZCdcbiAgICAgICAgICAgID8gcGFyc2VkLmFwcHJvdmFsU3RhdHVzXG4gICAgICAgICAgICA6ICdwZW5kaW5nJyxcbiAgICAgICAgc2hpcG1lbnRTdGF0dXM6XG4gICAgICAgICAgcGFyc2VkPy5zaGlwbWVudFN0YXR1cyA9PT0gJ3JlYWR5X3RvX3NoaXAnIHx8IHBhcnNlZD8uc2hpcG1lbnRTdGF0dXMgPT09ICdzaGlwcGVkJ1xuICAgICAgICAgICAgPyBwYXJzZWQuc2hpcG1lbnRTdGF0dXNcbiAgICAgICAgICAgIDogJ3BlbmRpbmcnLFxuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgbWV0YSA9IG51bGxcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNsZWFuTm90ZXM6IGNsZWFuLmpvaW4oJ1xcbicpLnRyaW0oKSxcbiAgICBtZXRhLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cHNlcnRDYXJnb1JlcGFpck1ldGEobm90ZXM6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsIGlucHV0OiBQYXJ0aWFsPENhcmdvUmVwYWlyTWV0YT4pOiBzdHJpbmcge1xuICBjb25zdCB7IGNsZWFuTm90ZXMsIG1ldGEgfSA9IHBhcnNlQ2FyZ29SZXBhaXJNZXRhKG5vdGVzKVxuICBjb25zdCBuZXh0OiBDYXJnb1JlcGFpck1ldGEgPSB7XG4gICAgLi4uKG1ldGEgfHwgZGVmYXVsdE1ldGEoKSksXG4gICAgLi4uaW5wdXQsXG4gICAgb3BlcmF0aW9uczogQXJyYXkuaXNBcnJheShpbnB1dC5vcGVyYXRpb25zKSA/IGlucHV0Lm9wZXJhdGlvbnMgOiAobWV0YT8ub3BlcmF0aW9ucyB8fCBbXSksXG4gICAgc3BhcmVQYXJ0czogQXJyYXkuaXNBcnJheShpbnB1dC5zcGFyZVBhcnRzKSA/IGlucHV0LnNwYXJlUGFydHMgOiAobWV0YT8uc3BhcmVQYXJ0cyB8fCBbXSksXG4gICAgaGlzdG9yeTogQXJyYXkuaXNBcnJheShpbnB1dC5oaXN0b3J5KSA/IGlucHV0Lmhpc3RvcnkgOiAobWV0YT8uaGlzdG9yeSB8fCBbXSksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH1cblxuICBjb25zdCBwYXJ0cyA9IFtjbGVhbk5vdGVzLCBgJHtNRVRBX1RBR30ke0pTT04uc3RyaW5naWZ5KG5leHQpfWBdLmZpbHRlcihCb29sZWFuKVxuICByZXR1cm4gcGFydHMuam9pbignXFxuJylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZENhcmdvUmVwYWlySGlzdG9yeShcbiAgbm90ZXM6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGl0ZW06IENhcmdvUmVwYWlySGlzdG9yeUl0ZW0sXG4gIHBhdGNoPzogUGFydGlhbDxDYXJnb1JlcGFpck1ldGE+XG4pOiBzdHJpbmcge1xuICBjb25zdCB7IG1ldGEgfSA9IHBhcnNlQ2FyZ29SZXBhaXJNZXRhKG5vdGVzKVxuICBjb25zdCBiYXNlID0gbWV0YSB8fCBkZWZhdWx0TWV0YSgpXG4gIGNvbnN0IGhpc3RvcnkgPSBbLi4uYmFzZS5oaXN0b3J5LCBpdGVtXVxuICByZXR1cm4gdXBzZXJ0Q2FyZ29SZXBhaXJNZXRhKG5vdGVzLCB7XG4gICAgLi4ucGF0Y2gsXG4gICAgaGlzdG9yeSxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJNRVRBX1RBRyIsImRlZmF1bHRNZXRhIiwiYWN0aXZlIiwidGVjaG5pY2lhbk5hbWUiLCJvcGVyYXRpb25zIiwiaW1hZ2VVcmwiLCJub3RlIiwic3BhcmVQYXJ0cyIsImFwcHJvdmFsU3RhdHVzIiwiYXBwcm92YWxBdCIsImFwcHJvdmFsTm90ZSIsImxhYm9yQ29zdCIsInBhcnRzQ29zdCIsImRpc3RyaWJ1dG9yQ29zdCIsImludGVybmFsU2VydmljZUNvc3QiLCJ0b3RhbENvc3QiLCJzdGF0dXMiLCJzaGlwbWVudFN0YXR1cyIsImhpc3RvcnkiLCJ1cGRhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwYXJzZUNhcmdvUmVwYWlyTWV0YSIsIm5vdGVzIiwidGV4dCIsInRyaW0iLCJpbmNsdWRlcyIsImNsZWFuTm90ZXMiLCJtZXRhIiwibGluZXMiLCJzcGxpdCIsImNsZWFuIiwibGluZSIsInN0YXJ0c1dpdGgiLCJwdXNoIiwicGF5bG9hZCIsInNsaWNlIiwibGVuZ3RoIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsInVwc2VydENhcmdvUmVwYWlyTWV0YSIsImlucHV0IiwibmV4dCIsInBhcnRzIiwic3RyaW5naWZ5IiwiZmlsdGVyIiwiQm9vbGVhbiIsImFwcGVuZENhcmdvUmVwYWlySGlzdG9yeSIsIml0ZW0iLCJwYXRjaCIsImJhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/cargo-repair.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ]\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBSztRQUFDO1FBQVM7UUFBUztLQUFPO0FBQ2pDLEdBQUU7QUFFRixJQUFJQyxJQUF5QixFQUFjO0lBQ3pDSixnQkFBZ0JFLE1BQU0sR0FBR0E7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXN0ZWsvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KHtcclxuICBsb2c6IFsncXVlcnknLCAnZXJyb3InLCAnd2FybiddLFxyXG59KVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYVxufVxuXHJcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcargo%2Froute&page=%2Fapi%2Fcargo%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcargo%2Froute.ts&appDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();