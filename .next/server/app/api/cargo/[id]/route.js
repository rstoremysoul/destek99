"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/cargo/[id]/route";
exports.ids = ["app/api/cargo/[id]/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcargo%2F%5Bid%5D%2Froute&page=%2Fapi%2Fcargo%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcargo%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcargo%2F%5Bid%5D%2Froute&page=%2Fapi%2Fcargo%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcargo%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Burak_Documents_GitHub_destek_src_app_api_cargo_id_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/cargo/[id]/route.ts */ \"(rsc)/./src/app/api/cargo/[id]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/cargo/[id]/route\",\n        pathname: \"/api/cargo/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/cargo/[id]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Burak\\\\Documents\\\\GitHub\\\\destek\\\\src\\\\app\\\\api\\\\cargo\\\\[id]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Burak_Documents_GitHub_destek_src_app_api_cargo_id_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/cargo/[id]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjYXJnbyUyRiU1QmlkJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjYXJnbyUyRiU1QmlkJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2FyZ28lMkYlNUJpZCU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNCdXJhayU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q2Rlc3RlayU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDQnVyYWslNUNEb2N1bWVudHMlNUNHaXRIdWIlNUNkZXN0ZWsmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVzdGVrLz9kYWI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEJ1cmFrXFxcXERvY3VtZW50c1xcXFxHaXRIdWJcXFxcZGVzdGVrXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGNhcmdvXFxcXFtpZF1cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NhcmdvL1tpZF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jYXJnby9baWRdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jYXJnby9baWRdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcQnVyYWtcXFxcRG9jdW1lbnRzXFxcXEdpdEh1YlxcXFxkZXN0ZWtcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcY2FyZ29cXFxcW2lkXVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2FyZ28vW2lkXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcargo%2F%5Bid%5D%2Froute&page=%2Fapi%2Fcargo%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcargo%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/cargo/[id]/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/cargo/[id]/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_cargo_repair__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/cargo-repair */ \"(rsc)/./src/lib/cargo-repair.ts\");\n\n\n\nfunction isUnknownRecordStatusArg(error) {\n    if (!(error instanceof Error)) return false;\n    return error.message.includes(\"Unknown argument `recordStatus`\") || error.message.includes(\"record_status\");\n}\nfunction normalizeRecordStatus(status, notes) {\n    const raw = typeof status === \"string\" ? status.toLowerCase() : \"open\";\n    const { meta } = (0,_lib_cargo_repair__WEBPACK_IMPORTED_MODULE_2__.parseCargoRepairMeta)(notes);\n    if (meta?.active) return \"device_repair\";\n    if (meta?.status === \"completed\" && meta?.shipmentStatus === \"ready_to_ship\") return \"ready_to_ship\";\n    return raw;\n}\nfunction isClosedRepairStatus(status) {\n    return status === \"COMPLETED\" || status === \"UNREPAIRABLE\";\n}\n// GET single cargo by ID\nasync function GET(request, { params }) {\n    try {\n        const cargo = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cargoTracking.findUnique({\n            where: {\n                id: params.id\n            },\n            include: {\n                devices: true\n            }\n        });\n        if (!cargo) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Cargo not found\"\n            }, {\n                status: 404\n            });\n        }\n        const repairRows = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.deviceRepair.findMany({\n            where: {\n                repairNotes: {\n                    contains: `[CARGO:${cargo.id}]`\n                }\n            },\n            orderBy: {\n                updatedAt: \"desc\"\n            },\n            select: {\n                id: true,\n                repairNumber: true,\n                status: true,\n                repairNotes: true,\n                updatedAt: true\n            }\n        });\n        const deviceRepairMap = new Map();\n        for (const row of repairRows){\n            const match = row.repairNotes?.match(/\\[CARGO_DEVICE:([^\\]]+)\\]/);\n            if (!match) continue;\n            const cargoDeviceId = match[1];\n            const status = isClosedRepairStatus(row.status) ? \"closed\" : \"open\";\n            const existing = deviceRepairMap.get(cargoDeviceId);\n            if (existing && existing.updatedAt > row.updatedAt) continue;\n            deviceRepairMap.set(cargoDeviceId, {\n                id: row.id,\n                repairNumber: row.repairNumber,\n                status,\n                state: String(row.status || \"\").toLowerCase(),\n                updatedAt: row.updatedAt\n            });\n        }\n        const anyOpenRepair = Array.from(deviceRepairMap.values()).some((item)=>item.status === \"open\");\n        const anyClosedRepair = Array.from(deviceRepairMap.values()).some((item)=>item.status === \"closed\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...cargo,\n            recordStatus: anyOpenRepair ? \"device_repair\" : anyClosedRepair ? \"ready_to_ship\" : normalizeRecordStatus(cargo.recordStatus, cargo.notes),\n            devices: cargo.devices.map((device)=>{\n                const ticket = deviceRepairMap.get(device.id);\n                return {\n                    ...device,\n                    repairTicket: ticket ? {\n                        id: ticket.id,\n                        repairNumber: ticket.repairNumber,\n                        status: ticket.status,\n                        state: ticket.state\n                    } : undefined\n                };\n            }),\n            repair: (0,_lib_cargo_repair__WEBPACK_IMPORTED_MODULE_2__.parseCargoRepairMeta)(cargo.notes).meta\n        });\n    } catch (error) {\n        console.error(\"Error fetching cargo:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch cargo\",\n            details:  false ? 0 : error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// PATCH update cargo\nasync function PATCH(request, { params }) {\n    try {\n        const body = await request.json();\n        const { devices, ...cargoData } = body || {};\n        if (\"targetLocationId\" in cargoData) {\n            delete cargoData.targetLocationId;\n        }\n        const statusMap = {\n            \"in_transit\": \"IN_TRANSIT\",\n            \"delivered\": \"DELIVERED\",\n            \"returned\": \"RETURNED\",\n            \"lost\": \"LOST\",\n            \"damaged\": \"DAMAGED\"\n        };\n        const typeMap = {\n            \"incoming\": \"INCOMING\",\n            \"outgoing\": \"OUTGOING\",\n            \"on_site_service\": \"ON_SITE_SERVICE\",\n            \"installation_team\": \"INSTALLATION_TEAM\"\n        };\n        const destinationMap = {\n            \"customer\": \"CUSTOMER\",\n            \"distributor\": \"DISTRIBUTOR\",\n            \"branch\": \"BRANCH\",\n            \"headquarters\": \"HEADQUARTERS\"\n        };\n        const conditionMap = {\n            \"new\": \"NEW\",\n            \"used\": \"USED\",\n            \"refurbished\": \"REFURBISHED\",\n            \"damaged\": \"DAMAGED\"\n        };\n        const purposeMap = {\n            \"installation\": \"INSTALLATION\",\n            \"replacement\": \"REPLACEMENT\",\n            \"repair\": \"REPAIR\",\n            \"return\": \"RETURN\"\n        };\n        const recordStatusMap = {\n            \"open\": \"OPEN\",\n            \"on_hold\": \"ON_HOLD\",\n            \"closed\": \"CLOSED\",\n            \"device_repair\": \"ON_HOLD\"\n        };\n        const requestedRecordStatus = String(cargoData.recordStatus || \"\").toLowerCase();\n        if (requestedRecordStatus === \"device_repair\") {\n            const cargoWithDevices = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cargoTracking.findUnique({\n                where: {\n                    id: params.id\n                },\n                include: {\n                    devices: true\n                }\n            });\n            const serials = (cargoWithDevices?.devices || []).map((d)=>d.serialNumber).filter(Boolean);\n            const devicesInSystem = serials.length ? await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.equivalentDevice.findMany({\n                where: {\n                    serialNumber: {\n                        in: serials\n                    }\n                },\n                include: {\n                    location: true\n                }\n            }) : [];\n            const hasTrackableLocation = devicesInSystem.length > 0;\n            const isAtHeadquarters = devicesInSystem.some((d)=>{\n                const locationName = (d.location?.name || \"\").toLowerCase();\n                return locationName.includes(\"merkez\") || locationName.includes(\"ofis\") || d.currentLocation === \"IN_WAREHOUSE\";\n            });\n            // Only enforce HQ rule when we can actually resolve device location from inventory.\n            if (hasTrackableLocation && !isAtHeadquarters) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Cihaz tamiri durumuna almak icin cihazin Merkez Ofis deposunda olmasi gerekir\"\n                }, {\n                    status: 400\n                });\n            }\n        }\n        const updated = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.$transaction(async (tx)=>{\n            const currentCargo = await tx.cargoTracking.findUnique({\n                where: {\n                    id: params.id\n                },\n                select: {\n                    notes: true\n                }\n            });\n            let nextNotes = typeof cargoData.notes === \"string\" ? cargoData.notes : currentCargo?.notes;\n            const updateData = {\n                ...cargoData,\n                recordStatus: cargoData.recordStatus ? recordStatusMap[String(cargoData.recordStatus).toLowerCase()] || String(cargoData.recordStatus).toUpperCase() : undefined,\n                sentDate: cargoData.sentDate ? new Date(cargoData.sentDate) : undefined,\n                deliveredDate: cargoData.deliveredDate ? new Date(cargoData.deliveredDate) : undefined,\n                type: cargoData.type ? typeMap[cargoData.type.toLowerCase()] || cargoData.type.toUpperCase() : undefined,\n                status: cargoData.status ? statusMap[cargoData.status.toLowerCase()] || cargoData.status.toUpperCase() : undefined,\n                destination: cargoData.destination ? destinationMap[cargoData.destination.toLowerCase()] || cargoData.destination.toUpperCase() : undefined\n            };\n            const nextRecordStatus = String(cargoData.recordStatus || \"\").toLowerCase();\n            if (nextRecordStatus === \"device_repair\") {\n                nextNotes = (0,_lib_cargo_repair__WEBPACK_IMPORTED_MODULE_2__.appendCargoRepairHistory)(nextNotes || \"\", {\n                    at: new Date().toISOString(),\n                    action: \"Kayit cihaz tamiri durumuna alindi\"\n                }, {\n                    active: true,\n                    status: \"in_progress\"\n                });\n                updateData.notes = nextNotes;\n            } else if (nextRecordStatus === \"open\" || nextRecordStatus === \"closed\") {\n                const { meta } = (0,_lib_cargo_repair__WEBPACK_IMPORTED_MODULE_2__.parseCargoRepairMeta)(nextNotes || \"\");\n                if (meta) {\n                    updateData.notes = (0,_lib_cargo_repair__WEBPACK_IMPORTED_MODULE_2__.upsertCargoRepairMeta)(nextNotes, {\n                        active: false,\n                        status: nextRecordStatus === \"closed\" ? \"completed\" : \"pending\"\n                    });\n                }\n            }\n            let cargo;\n            try {\n                cargo = await tx.cargoTracking.update({\n                    where: {\n                        id: params.id\n                    },\n                    data: updateData\n                });\n            } catch (error) {\n                if (!isUnknownRecordStatusArg(error)) throw error;\n                delete updateData.recordStatus;\n                cargo = await tx.cargoTracking.update({\n                    where: {\n                        id: params.id\n                    },\n                    data: updateData\n                });\n            }\n            if (Array.isArray(devices)) {\n                await tx.cargoDevice.deleteMany({\n                    where: {\n                        cargoId: params.id\n                    }\n                });\n                await tx.cargoDevice.createMany({\n                    data: devices.map((device)=>({\n                            cargoId: params.id,\n                            deviceName: device.deviceName,\n                            model: device.model,\n                            serialNumber: device.serialNumber,\n                            quantity: device.quantity || 1,\n                            condition: conditionMap[String(device.condition || \"\").toLowerCase()] || String(device.condition || \"NEW\").toUpperCase(),\n                            purpose: purposeMap[String(device.purpose || \"\").toLowerCase()] || String(device.purpose || \"INSTALLATION\").toUpperCase()\n                        }))\n                });\n            }\n            return tx.cargoTracking.findUnique({\n                where: {\n                    id: params.id\n                },\n                include: {\n                    devices: true\n                }\n            });\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(updated);\n    } catch (error) {\n        console.error(\"Error updating cargo:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to update cargo\",\n            details:  false ? 0 : error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE cargo\nasync function DELETE(request, { params }) {\n    try {\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cargoTracking.delete({\n            where: {\n                id: params.id\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Error deleting cargo:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to delete cargo\",\n            details:  false ? 0 : error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQUM7Z0JBQ3ZCQyxTQUFTO29CQUFFQyxTQUFTO2dCQUFLO1lBQzNCO1FBQ0Y7UUFFQSxPQUFPNUIscURBQVlBLENBQUM2QixJQUFJLENBQUNnRTtJQUMzQixFQUFFLE9BQU92RixPQUFPO1FBQ2R5RCxRQUFRekQsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBT04scURBQVlBLENBQUM2QixJQUFJLENBQ3RCO1lBQ0V2QixPQUFPO1lBQ1AwRCxTQUFTQyxNQUF5QixHQUM5QkosQ0FBU0EsR0FDUnZELGlCQUFpQkMsUUFBUUQsTUFBTUUsT0FBTyxHQUFHO1FBQ2hELEdBQ0E7WUFBRUcsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQSxlQUFlO0FBQ1IsZUFBZThHLE9BQ3BCckcsT0FBb0IsRUFDcEIsRUFBRUMsTUFBTSxFQUE4QjtJQUV0QyxJQUFJO1FBQ0YsTUFBTXBCLCtDQUFNQSxDQUFDc0IsYUFBYSxDQUFDbUcsTUFBTSxDQUFDO1lBQ2hDakcsT0FBTztnQkFBRUMsSUFBSUwsT0FBT0ssRUFBRTtZQUFDO1FBQ3pCO1FBRUEsT0FBTzFCLHFEQUFZQSxDQUFDNkIsSUFBSSxDQUFDO1lBQUU4RixTQUFTO1FBQUs7SUFDM0MsRUFBRSxPQUFPckgsT0FBTztRQUNkeUQsUUFBUXpELEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU9OLHFEQUFZQSxDQUFDNkIsSUFBSSxDQUN0QjtZQUNFdkIsT0FBTztZQUNQMEQsU0FBU0MsTUFBeUIsR0FDOUJKLENBQVNBLEdBQ1J2RCxpQkFBaUJDLFFBQVFELE1BQU1FLE9BQU8sR0FBRztRQUNoRCxHQUNBO1lBQUVHLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVzdGVrLy4vc3JjL2FwcC9hcGkvY2FyZ28vW2lkXS9yb3V0ZS50cz9iNTA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9wcmlzbWEnXG5pbXBvcnQgeyBhcHBlbmRDYXJnb1JlcGFpckhpc3RvcnksIHBhcnNlQ2FyZ29SZXBhaXJNZXRhLCB1cHNlcnRDYXJnb1JlcGFpck1ldGEgfSBmcm9tICdAL2xpYi9jYXJnby1yZXBhaXInXG5cbmZ1bmN0aW9uIGlzVW5rbm93blJlY29yZFN0YXR1c0FyZyhlcnJvcjogdW5rbm93bikge1xuICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSkgcmV0dXJuIGZhbHNlXG4gIHJldHVybiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdVbmtub3duIGFyZ3VtZW50IGByZWNvcmRTdGF0dXNgJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncmVjb3JkX3N0YXR1cycpXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVJlY29yZFN0YXR1cyhzdGF0dXM6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsIG5vdGVzPzogc3RyaW5nIHwgbnVsbCkge1xuICBjb25zdCByYXcgPSB0eXBlb2Ygc3RhdHVzID09PSAnc3RyaW5nJyA/IHN0YXR1cy50b0xvd2VyQ2FzZSgpIDogJ29wZW4nXG4gIGNvbnN0IHsgbWV0YSB9ID0gcGFyc2VDYXJnb1JlcGFpck1ldGEobm90ZXMpXG4gIGlmIChtZXRhPy5hY3RpdmUpIHJldHVybiAnZGV2aWNlX3JlcGFpcidcbiAgaWYgKG1ldGE/LnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgJiYgbWV0YT8uc2hpcG1lbnRTdGF0dXMgPT09ICdyZWFkeV90b19zaGlwJykgcmV0dXJuICdyZWFkeV90b19zaGlwJ1xuICByZXR1cm4gcmF3XG59XG5cbmZ1bmN0aW9uIGlzQ2xvc2VkUmVwYWlyU3RhdHVzKHN0YXR1czogc3RyaW5nKSB7XG4gIHJldHVybiBzdGF0dXMgPT09ICdDT01QTEVURUQnIHx8IHN0YXR1cyA9PT0gJ1VOUkVQQUlSQUJMRSdcbn1cblxuLy8gR0VUIHNpbmdsZSBjYXJnbyBieSBJRFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjYXJnbyA9IGF3YWl0IHByaXNtYS5jYXJnb1RyYWNraW5nLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHBhcmFtcy5pZCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBkZXZpY2VzOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgaWYgKCFjYXJnbykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQ2FyZ28gbm90IGZvdW5kJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCByZXBhaXJSb3dzID0gYXdhaXQgcHJpc21hLmRldmljZVJlcGFpci5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICByZXBhaXJOb3RlczogeyBjb250YWluczogYFtDQVJHTzoke2NhcmdvLmlkfV1gIH0sXG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogeyB1cGRhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIGlkOiB0cnVlLFxuICAgICAgICByZXBhaXJOdW1iZXI6IHRydWUsXG4gICAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgICAgcmVwYWlyTm90ZXM6IHRydWUsXG4gICAgICAgIHVwZGF0ZWRBdDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIGNvbnN0IGRldmljZVJlcGFpck1hcCA9IG5ldyBNYXA8c3RyaW5nLCB7IGlkOiBzdHJpbmc7IHJlcGFpck51bWJlcjogc3RyaW5nOyBzdGF0dXM6ICdvcGVuJyB8ICdjbG9zZWQnOyBzdGF0ZTogc3RyaW5nOyB1cGRhdGVkQXQ6IERhdGUgfT4oKVxuICAgIGZvciAoY29uc3Qgcm93IG9mIHJlcGFpclJvd3MpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gcm93LnJlcGFpck5vdGVzPy5tYXRjaCgvXFxbQ0FSR09fREVWSUNFOihbXlxcXV0rKVxcXS8pXG4gICAgICBpZiAoIW1hdGNoKSBjb250aW51ZVxuICAgICAgY29uc3QgY2FyZ29EZXZpY2VJZCA9IG1hdGNoWzFdXG4gICAgICBjb25zdCBzdGF0dXMgPSBpc0Nsb3NlZFJlcGFpclN0YXR1cyhyb3cuc3RhdHVzKSA/ICdjbG9zZWQnIDogJ29wZW4nXG4gICAgICBjb25zdCBleGlzdGluZyA9IGRldmljZVJlcGFpck1hcC5nZXQoY2FyZ29EZXZpY2VJZClcbiAgICAgIGlmIChleGlzdGluZyAmJiBleGlzdGluZy51cGRhdGVkQXQgPiByb3cudXBkYXRlZEF0KSBjb250aW51ZVxuICAgICAgZGV2aWNlUmVwYWlyTWFwLnNldChjYXJnb0RldmljZUlkLCB7XG4gICAgICAgIGlkOiByb3cuaWQsXG4gICAgICAgIHJlcGFpck51bWJlcjogcm93LnJlcGFpck51bWJlcixcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBzdGF0ZTogU3RyaW5nKHJvdy5zdGF0dXMgfHwgJycpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIHVwZGF0ZWRBdDogcm93LnVwZGF0ZWRBdCxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgYW55T3BlblJlcGFpciA9IEFycmF5LmZyb20oZGV2aWNlUmVwYWlyTWFwLnZhbHVlcygpKS5zb21lKChpdGVtKSA9PiBpdGVtLnN0YXR1cyA9PT0gJ29wZW4nKVxuICAgIGNvbnN0IGFueUNsb3NlZFJlcGFpciA9IEFycmF5LmZyb20oZGV2aWNlUmVwYWlyTWFwLnZhbHVlcygpKS5zb21lKChpdGVtKSA9PiBpdGVtLnN0YXR1cyA9PT0gJ2Nsb3NlZCcpXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgLi4uY2FyZ28sXG4gICAgICByZWNvcmRTdGF0dXM6IGFueU9wZW5SZXBhaXJcbiAgICAgICAgPyAnZGV2aWNlX3JlcGFpcidcbiAgICAgICAgOiAoYW55Q2xvc2VkUmVwYWlyID8gJ3JlYWR5X3RvX3NoaXAnIDogbm9ybWFsaXplUmVjb3JkU3RhdHVzKChjYXJnbyBhcyBhbnkpLnJlY29yZFN0YXR1cywgKGNhcmdvIGFzIGFueSkubm90ZXMpKSxcbiAgICAgIGRldmljZXM6IGNhcmdvLmRldmljZXMubWFwKChkZXZpY2U6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCB0aWNrZXQgPSBkZXZpY2VSZXBhaXJNYXAuZ2V0KGRldmljZS5pZClcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5kZXZpY2UsXG4gICAgICAgICAgcmVwYWlyVGlja2V0OiB0aWNrZXRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGlkOiB0aWNrZXQuaWQsXG4gICAgICAgICAgICAgICAgcmVwYWlyTnVtYmVyOiB0aWNrZXQucmVwYWlyTnVtYmVyLFxuICAgICAgICAgICAgICAgIHN0YXR1czogdGlja2V0LnN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGF0ZTogdGlja2V0LnN0YXRlLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICByZXBhaXI6IHBhcnNlQ2FyZ29SZXBhaXJNZXRhKChjYXJnbyBhcyBhbnkpLm5vdGVzKS5tZXRhLFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FyZ286JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBjYXJnbycsXG4gICAgICAgIGRldGFpbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbiAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgIDogKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InKSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuLy8gUEFUQ0ggdXBkYXRlIGNhcmdvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUEFUQ0goXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgY29uc3QgeyBkZXZpY2VzLCAuLi5jYXJnb0RhdGEgfSA9IGJvZHkgfHwge31cbiAgICBpZiAoJ3RhcmdldExvY2F0aW9uSWQnIGluIGNhcmdvRGF0YSkge1xuICAgICAgZGVsZXRlIGNhcmdvRGF0YS50YXJnZXRMb2NhdGlvbklkXG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdHVzTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgJ2luX3RyYW5zaXQnOiAnSU5fVFJBTlNJVCcsXG4gICAgICAnZGVsaXZlcmVkJzogJ0RFTElWRVJFRCcsXG4gICAgICAncmV0dXJuZWQnOiAnUkVUVVJORUQnLFxuICAgICAgJ2xvc3QnOiAnTE9TVCcsXG4gICAgICAnZGFtYWdlZCc6ICdEQU1BR0VEJyxcbiAgICB9XG5cbiAgICBjb25zdCB0eXBlTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgJ2luY29taW5nJzogJ0lOQ09NSU5HJyxcbiAgICAgICdvdXRnb2luZyc6ICdPVVRHT0lORycsXG4gICAgICAnb25fc2l0ZV9zZXJ2aWNlJzogJ09OX1NJVEVfU0VSVklDRScsXG4gICAgICAnaW5zdGFsbGF0aW9uX3RlYW0nOiAnSU5TVEFMTEFUSU9OX1RFQU0nLFxuICAgIH1cblxuICAgIGNvbnN0IGRlc3RpbmF0aW9uTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgJ2N1c3RvbWVyJzogJ0NVU1RPTUVSJyxcbiAgICAgICdkaXN0cmlidXRvcic6ICdESVNUUklCVVRPUicsXG4gICAgICAnYnJhbmNoJzogJ0JSQU5DSCcsXG4gICAgICAnaGVhZHF1YXJ0ZXJzJzogJ0hFQURRVUFSVEVSUycsXG4gICAgfVxuXG4gICAgY29uc3QgY29uZGl0aW9uTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgJ25ldyc6ICdORVcnLFxuICAgICAgJ3VzZWQnOiAnVVNFRCcsXG4gICAgICAncmVmdXJiaXNoZWQnOiAnUkVGVVJCSVNIRUQnLFxuICAgICAgJ2RhbWFnZWQnOiAnREFNQUdFRCcsXG4gICAgfVxuXG4gICAgY29uc3QgcHVycG9zZU1hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAgICdpbnN0YWxsYXRpb24nOiAnSU5TVEFMTEFUSU9OJyxcbiAgICAgICdyZXBsYWNlbWVudCc6ICdSRVBMQUNFTUVOVCcsXG4gICAgICAncmVwYWlyJzogJ1JFUEFJUicsXG4gICAgICAncmV0dXJuJzogJ1JFVFVSTicsXG4gICAgfVxuXG4gICAgY29uc3QgcmVjb3JkU3RhdHVzTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgJ29wZW4nOiAnT1BFTicsXG4gICAgICAnb25faG9sZCc6ICdPTl9IT0xEJyxcbiAgICAgICdjbG9zZWQnOiAnQ0xPU0VEJyxcbiAgICAgICdkZXZpY2VfcmVwYWlyJzogJ09OX0hPTEQnLFxuICAgIH1cblxuICAgIGNvbnN0IHJlcXVlc3RlZFJlY29yZFN0YXR1cyA9IFN0cmluZyhjYXJnb0RhdGEucmVjb3JkU3RhdHVzIHx8ICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKHJlcXVlc3RlZFJlY29yZFN0YXR1cyA9PT0gJ2RldmljZV9yZXBhaXInKSB7XG4gICAgICBjb25zdCBjYXJnb1dpdGhEZXZpY2VzID0gYXdhaXQgcHJpc21hLmNhcmdvVHJhY2tpbmcuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBwYXJhbXMuaWQgfSxcbiAgICAgICAgaW5jbHVkZTogeyBkZXZpY2VzOiB0cnVlIH0sXG4gICAgICB9KVxuICAgICAgY29uc3Qgc2VyaWFscyA9IChjYXJnb1dpdGhEZXZpY2VzPy5kZXZpY2VzIHx8IFtdKS5tYXAoKGQpID0+IGQuc2VyaWFsTnVtYmVyKS5maWx0ZXIoQm9vbGVhbilcbiAgICAgIGNvbnN0IGRldmljZXNJblN5c3RlbSA9IHNlcmlhbHMubGVuZ3RoXG4gICAgICAgID8gYXdhaXQgcHJpc21hLmVxdWl2YWxlbnREZXZpY2UuZmluZE1hbnkoe1xuICAgICAgICAgICAgd2hlcmU6IHsgc2VyaWFsTnVtYmVyOiB7IGluOiBzZXJpYWxzIGFzIHN0cmluZ1tdIH0gfSxcbiAgICAgICAgICAgIGluY2x1ZGU6IHsgbG9jYXRpb246IHRydWUgfSxcbiAgICAgICAgICB9KVxuICAgICAgICA6IFtdXG5cbiAgICAgIGNvbnN0IGhhc1RyYWNrYWJsZUxvY2F0aW9uID0gZGV2aWNlc0luU3lzdGVtLmxlbmd0aCA+IDBcbiAgICAgIGNvbnN0IGlzQXRIZWFkcXVhcnRlcnMgPSBkZXZpY2VzSW5TeXN0ZW0uc29tZSgoZCkgPT4ge1xuICAgICAgICBjb25zdCBsb2NhdGlvbk5hbWUgPSAoZC5sb2NhdGlvbj8ubmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGxvY2F0aW9uTmFtZS5pbmNsdWRlcygnbWVya2V6JykgfHxcbiAgICAgICAgICBsb2NhdGlvbk5hbWUuaW5jbHVkZXMoJ29maXMnKSB8fFxuICAgICAgICAgIGQuY3VycmVudExvY2F0aW9uID09PSAnSU5fV0FSRUhPVVNFJ1xuICAgICAgICApXG4gICAgICB9KVxuXG4gICAgICAvLyBPbmx5IGVuZm9yY2UgSFEgcnVsZSB3aGVuIHdlIGNhbiBhY3R1YWxseSByZXNvbHZlIGRldmljZSBsb2NhdGlvbiBmcm9tIGludmVudG9yeS5cbiAgICAgIGlmIChoYXNUcmFja2FibGVMb2NhdGlvbiAmJiAhaXNBdEhlYWRxdWFydGVycykge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogJ0NpaGF6IHRhbWlyaSBkdXJ1bXVuYSBhbG1hayBpY2luIGNpaGF6aW4gTWVya2V6IE9maXMgZGVwb3N1bmRhIG9sbWFzaSBnZXJla2lyJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IHByaXNtYS4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4KSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50Q2FyZ28gPSBhd2FpdCB0eC5jYXJnb1RyYWNraW5nLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogcGFyYW1zLmlkIH0sXG4gICAgICAgIHNlbGVjdDogeyBub3RlczogdHJ1ZSB9LFxuICAgICAgfSlcbiAgICAgIGxldCBuZXh0Tm90ZXMgPSB0eXBlb2YgY2FyZ29EYXRhLm5vdGVzID09PSAnc3RyaW5nJyA/IGNhcmdvRGF0YS5ub3RlcyA6IGN1cnJlbnRDYXJnbz8ubm90ZXNcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XG4gICAgICAgIC4uLmNhcmdvRGF0YSxcbiAgICAgICAgcmVjb3JkU3RhdHVzOiBjYXJnb0RhdGEucmVjb3JkU3RhdHVzXG4gICAgICAgICAgPyAocmVjb3JkU3RhdHVzTWFwW1N0cmluZyhjYXJnb0RhdGEucmVjb3JkU3RhdHVzKS50b0xvd2VyQ2FzZSgpXSB8fCBTdHJpbmcoY2FyZ29EYXRhLnJlY29yZFN0YXR1cykudG9VcHBlckNhc2UoKSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VudERhdGU6IGNhcmdvRGF0YS5zZW50RGF0ZSA/IG5ldyBEYXRlKGNhcmdvRGF0YS5zZW50RGF0ZSkgOiB1bmRlZmluZWQsXG4gICAgICAgIGRlbGl2ZXJlZERhdGU6IGNhcmdvRGF0YS5kZWxpdmVyZWREYXRlID8gbmV3IERhdGUoY2FyZ29EYXRhLmRlbGl2ZXJlZERhdGUpIDogdW5kZWZpbmVkLFxuICAgICAgICB0eXBlOiBjYXJnb0RhdGEudHlwZSA/ICh0eXBlTWFwW2NhcmdvRGF0YS50eXBlLnRvTG93ZXJDYXNlKCldIHx8IGNhcmdvRGF0YS50eXBlLnRvVXBwZXJDYXNlKCkpIDogdW5kZWZpbmVkLFxuICAgICAgICBzdGF0dXM6IGNhcmdvRGF0YS5zdGF0dXMgPyAoc3RhdHVzTWFwW2NhcmdvRGF0YS5zdGF0dXMudG9Mb3dlckNhc2UoKV0gfHwgY2FyZ29EYXRhLnN0YXR1cy50b1VwcGVyQ2FzZSgpKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgZGVzdGluYXRpb246IGNhcmdvRGF0YS5kZXN0aW5hdGlvbiA/IChkZXN0aW5hdGlvbk1hcFtjYXJnb0RhdGEuZGVzdGluYXRpb24udG9Mb3dlckNhc2UoKV0gfHwgY2FyZ29EYXRhLmRlc3RpbmF0aW9uLnRvVXBwZXJDYXNlKCkpIDogdW5kZWZpbmVkLFxuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXh0UmVjb3JkU3RhdHVzID0gU3RyaW5nKGNhcmdvRGF0YS5yZWNvcmRTdGF0dXMgfHwgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgIGlmIChuZXh0UmVjb3JkU3RhdHVzID09PSAnZGV2aWNlX3JlcGFpcicpIHtcbiAgICAgICAgbmV4dE5vdGVzID0gYXBwZW5kQ2FyZ29SZXBhaXJIaXN0b3J5KFxuICAgICAgICAgIG5leHROb3RlcyB8fCAnJyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgYWN0aW9uOiAnS2F5aXQgY2loYXogdGFtaXJpIGR1cnVtdW5hIGFsaW5kaScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIHVwZGF0ZURhdGEubm90ZXMgPSBuZXh0Tm90ZXNcbiAgICAgIH0gZWxzZSBpZiAobmV4dFJlY29yZFN0YXR1cyA9PT0gJ29wZW4nIHx8IG5leHRSZWNvcmRTdGF0dXMgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgIGNvbnN0IHsgbWV0YSB9ID0gcGFyc2VDYXJnb1JlcGFpck1ldGEobmV4dE5vdGVzIHx8ICcnKVxuICAgICAgICBpZiAobWV0YSkge1xuICAgICAgICAgIHVwZGF0ZURhdGEubm90ZXMgPSB1cHNlcnRDYXJnb1JlcGFpck1ldGEobmV4dE5vdGVzLCB7XG4gICAgICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICAgICAgc3RhdHVzOiBuZXh0UmVjb3JkU3RhdHVzID09PSAnY2xvc2VkJyA/ICdjb21wbGV0ZWQnIDogJ3BlbmRpbmcnLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IGNhcmdvXG4gICAgICB0cnkge1xuICAgICAgICBjYXJnbyA9IGF3YWl0ICh0eC5jYXJnb1RyYWNraW5nIGFzIGFueSkudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogcGFyYW1zLmlkIH0sXG4gICAgICAgICAgZGF0YTogdXBkYXRlRGF0YSxcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmICghaXNVbmtub3duUmVjb3JkU3RhdHVzQXJnKGVycm9yKSkgdGhyb3cgZXJyb3JcblxuICAgICAgICBkZWxldGUgdXBkYXRlRGF0YS5yZWNvcmRTdGF0dXNcbiAgICAgICAgY2FyZ28gPSBhd2FpdCB0eC5jYXJnb1RyYWNraW5nLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHBhcmFtcy5pZCB9LFxuICAgICAgICAgIGRhdGE6IHVwZGF0ZURhdGEsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGRldmljZXMpKSB7XG4gICAgICAgIGF3YWl0IHR4LmNhcmdvRGV2aWNlLmRlbGV0ZU1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IGNhcmdvSWQ6IHBhcmFtcy5pZCB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIGF3YWl0IHR4LmNhcmdvRGV2aWNlLmNyZWF0ZU1hbnkoe1xuICAgICAgICAgIGRhdGE6IGRldmljZXMubWFwKChkZXZpY2U6IGFueSkgPT4gKHtcbiAgICAgICAgICAgIGNhcmdvSWQ6IHBhcmFtcy5pZCxcbiAgICAgICAgICAgIGRldmljZU5hbWU6IGRldmljZS5kZXZpY2VOYW1lLFxuICAgICAgICAgICAgbW9kZWw6IGRldmljZS5tb2RlbCxcbiAgICAgICAgICAgIHNlcmlhbE51bWJlcjogZGV2aWNlLnNlcmlhbE51bWJlcixcbiAgICAgICAgICAgIHF1YW50aXR5OiBkZXZpY2UucXVhbnRpdHkgfHwgMSxcbiAgICAgICAgICAgIGNvbmRpdGlvbjpcbiAgICAgICAgICAgICAgKGNvbmRpdGlvbk1hcFtTdHJpbmcoZGV2aWNlLmNvbmRpdGlvbiB8fCAnJykudG9Mb3dlckNhc2UoKV0gfHxcbiAgICAgICAgICAgICAgICBTdHJpbmcoZGV2aWNlLmNvbmRpdGlvbiB8fCAnTkVXJykudG9VcHBlckNhc2UoKSkgYXMgYW55LFxuICAgICAgICAgICAgcHVycG9zZTpcbiAgICAgICAgICAgICAgKHB1cnBvc2VNYXBbU3RyaW5nKGRldmljZS5wdXJwb3NlIHx8ICcnKS50b0xvd2VyQ2FzZSgpXSB8fFxuICAgICAgICAgICAgICAgIFN0cmluZyhkZXZpY2UucHVycG9zZSB8fCAnSU5TVEFMTEFUSU9OJykudG9VcHBlckNhc2UoKSkgYXMgYW55LFxuICAgICAgICAgIH0pKSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHR4LmNhcmdvVHJhY2tpbmcuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBwYXJhbXMuaWQgfSxcbiAgICAgICAgaW5jbHVkZTogeyBkZXZpY2VzOiB0cnVlIH0sXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24odXBkYXRlZClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXJnbzonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSBjYXJnbycsXG4gICAgICAgIGRldGFpbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbiAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgIDogKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InKSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuLy8gREVMRVRFIGNhcmdvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIGF3YWl0IHByaXNtYS5jYXJnb1RyYWNraW5nLmRlbGV0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcGFyYW1zLmlkIH0sXG4gICAgfSlcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBjYXJnbzonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGRlbGV0ZSBjYXJnbycsXG4gICAgICAgIGRldGFpbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbiAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgIDogKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InKSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwcmlzbWEiLCJhcHBlbmRDYXJnb1JlcGFpckhpc3RvcnkiLCJwYXJzZUNhcmdvUmVwYWlyTWV0YSIsInVwc2VydENhcmdvUmVwYWlyTWV0YSIsImlzVW5rbm93blJlY29yZFN0YXR1c0FyZyIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJub3JtYWxpemVSZWNvcmRTdGF0dXMiLCJzdGF0dXMiLCJub3RlcyIsInJhdyIsInRvTG93ZXJDYXNlIiwibWV0YSIsImFjdGl2ZSIsInNoaXBtZW50U3RhdHVzIiwiaXNDbG9zZWRSZXBhaXJTdGF0dXMiLCJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwiY2FyZ28iLCJjYXJnb1RyYWNraW5nIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJpbmNsdWRlIiwiZGV2aWNlcyIsImpzb24iLCJyZXBhaXJSb3dzIiwiZGV2aWNlUmVwYWlyIiwiZmluZE1hbnkiLCJyZXBhaXJOb3RlcyIsImNvbnRhaW5zIiwib3JkZXJCeSIsInVwZGF0ZWRBdCIsInNlbGVjdCIsInJlcGFpck51bWJlciIsImRldmljZVJlcGFpck1hcCIsIk1hcCIsInJvdyIsIm1hdGNoIiwiY2FyZ29EZXZpY2VJZCIsImV4aXN0aW5nIiwiZ2V0Iiwic2V0Iiwic3RhdGUiLCJTdHJpbmciLCJhbnlPcGVuUmVwYWlyIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwic29tZSIsIml0ZW0iLCJhbnlDbG9zZWRSZXBhaXIiLCJyZWNvcmRTdGF0dXMiLCJtYXAiLCJkZXZpY2UiLCJ0aWNrZXQiLCJyZXBhaXJUaWNrZXQiLCJ1bmRlZmluZWQiLCJyZXBhaXIiLCJjb25zb2xlIiwiZGV0YWlscyIsInByb2Nlc3MiLCJQQVRDSCIsImJvZHkiLCJjYXJnb0RhdGEiLCJ0YXJnZXRMb2NhdGlvbklkIiwic3RhdHVzTWFwIiwidHlwZU1hcCIsImRlc3RpbmF0aW9uTWFwIiwiY29uZGl0aW9uTWFwIiwicHVycG9zZU1hcCIsInJlY29yZFN0YXR1c01hcCIsInJlcXVlc3RlZFJlY29yZFN0YXR1cyIsImNhcmdvV2l0aERldmljZXMiLCJzZXJpYWxzIiwiZCIsInNlcmlhbE51bWJlciIsImZpbHRlciIsIkJvb2xlYW4iLCJkZXZpY2VzSW5TeXN0ZW0iLCJsZW5ndGgiLCJlcXVpdmFsZW50RGV2aWNlIiwiaW4iLCJsb2NhdGlvbiIsImhhc1RyYWNrYWJsZUxvY2F0aW9uIiwiaXNBdEhlYWRxdWFydGVycyIsImxvY2F0aW9uTmFtZSIsIm5hbWUiLCJjdXJyZW50TG9jYXRpb24iLCJ1cGRhdGVkIiwiJHRyYW5zYWN0aW9uIiwidHgiLCJjdXJyZW50Q2FyZ28iLCJuZXh0Tm90ZXMiLCJ1cGRhdGVEYXRhIiwidG9VcHBlckNhc2UiLCJzZW50RGF0ZSIsIkRhdGUiLCJkZWxpdmVyZWREYXRlIiwidHlwZSIsImRlc3RpbmF0aW9uIiwibmV4dFJlY29yZFN0YXR1cyIsImF0IiwidG9JU09TdHJpbmciLCJhY3Rpb24iLCJ1cGRhdGUiLCJkYXRhIiwiaXNBcnJheSIsImNhcmdvRGV2aWNlIiwiZGVsZXRlTWFueSIsImNhcmdvSWQiLCJjcmVhdGVNYW55IiwiZGV2aWNlTmFtZSIsIm1vZGVsIiwicXVhbnRpdHkiLCJjb25kaXRpb24iLCJwdXJwb3NlIiwiREVMRVRFIiwiZGVsZXRlIiwic3VjY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/cargo/[id]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/cargo-repair.ts":
/*!*********************************!*\
  !*** ./src/lib/cargo-repair.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appendCargoRepairHistory: () => (/* binding */ appendCargoRepairHistory),\n/* harmony export */   parseCargoRepairMeta: () => (/* binding */ parseCargoRepairMeta),\n/* harmony export */   upsertCargoRepairMeta: () => (/* binding */ upsertCargoRepairMeta)\n/* harmony export */ });\nconst META_TAG = \"[[CARGO_REPAIR_META]]\";\nconst defaultMeta = ()=>({\n        active: true,\n        technicianName: \"\",\n        operations: [],\n        imageUrl: \"\",\n        note: \"\",\n        spareParts: [],\n        approvalStatus: \"pending\",\n        approvalAt: \"\",\n        approvalNote: \"\",\n        laborCost: 0,\n        partsCost: 0,\n        distributorCost: 0,\n        internalServiceCost: 0,\n        totalCost: 0,\n        status: \"pending\",\n        shipmentStatus: \"pending\",\n        history: [],\n        updatedAt: new Date().toISOString()\n    });\nfunction parseCargoRepairMeta(notes) {\n    const text = (notes || \"\").trim();\n    if (!text.includes(META_TAG)) {\n        return {\n            cleanNotes: text,\n            meta: null\n        };\n    }\n    const lines = text.split(\"\\n\");\n    const clean = [];\n    let meta = null;\n    for (const line of lines){\n        if (!line.startsWith(META_TAG)) {\n            clean.push(line);\n            continue;\n        }\n        const payload = line.slice(META_TAG.length).trim();\n        try {\n            const parsed = JSON.parse(payload);\n            meta = {\n                ...defaultMeta(),\n                ...parsed,\n                history: Array.isArray(parsed?.history) ? parsed.history : [],\n                operations: Array.isArray(parsed?.operations) ? parsed.operations : [],\n                spareParts: Array.isArray(parsed?.spareParts) ? parsed.spareParts : [],\n                approvalStatus: parsed?.approvalStatus === \"approved\" || parsed?.approvalStatus === \"rejected\" ? parsed.approvalStatus : \"pending\",\n                shipmentStatus: parsed?.shipmentStatus === \"ready_to_ship\" || parsed?.shipmentStatus === \"shipped\" ? parsed.shipmentStatus : \"pending\"\n            };\n        } catch  {\n            meta = null;\n        }\n    }\n    return {\n        cleanNotes: clean.join(\"\\n\").trim(),\n        meta\n    };\n}\nfunction upsertCargoRepairMeta(notes, input) {\n    const { cleanNotes, meta } = parseCargoRepairMeta(notes);\n    const next = {\n        ...meta || defaultMeta(),\n        ...input,\n        operations: Array.isArray(input.operations) ? input.operations : meta?.operations || [],\n        spareParts: Array.isArray(input.spareParts) ? input.spareParts : meta?.spareParts || [],\n        history: Array.isArray(input.history) ? input.history : meta?.history || [],\n        updatedAt: new Date().toISOString()\n    };\n    const parts = [\n        cleanNotes,\n        `${META_TAG}${JSON.stringify(next)}`\n    ].filter(Boolean);\n    return parts.join(\"\\n\");\n}\nfunction appendCargoRepairHistory(notes, item, patch) {\n    const { meta } = parseCargoRepairMeta(notes);\n    const base = meta || defaultMeta();\n    const history = [\n        ...base.history,\n        item\n    ];\n    return upsertCargoRepairMeta(notes, {\n        ...patch,\n        history\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixTQUFTLEVBQUV1QyxLQUFLUyxTQUFTLENBQUNGLE1BQU0sQ0FBQztLQUFDLENBQUNHLE1BQU0sQ0FBQ0M7SUFDeEUsT0FBT0gsTUFBTUosSUFBSSxDQUFDO0FBQ3BCO0FBRU8sU0FBU1EseUJBQ2Q1QixLQUFnQyxFQUNoQzZCLElBQTRCLEVBQzVCQyxLQUFnQztJQUVoQyxNQUFNLEVBQUV6QixJQUFJLEVBQUUsR0FBR04scUJBQXFCQztJQUN0QyxNQUFNK0IsT0FBTzFCLFFBQVEzQjtJQUNyQixNQUFNaUIsVUFBVTtXQUFJb0MsS0FBS3BDLE9BQU87UUFBRWtDO0tBQUs7SUFDdkMsT0FBT1Isc0JBQXNCckIsT0FBTztRQUNsQyxHQUFHOEIsS0FBSztRQUNSbkM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVzdGVrLy4vc3JjL2xpYi9jYXJnby1yZXBhaXIudHM/MzZlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIENhcmdvUmVwYWlySGlzdG9yeUl0ZW0ge1xuICBhdDogc3RyaW5nXG4gIGFjdGlvbjogc3RyaW5nXG4gIHRlY2huaWNpYW5OYW1lPzogc3RyaW5nXG4gIG9wZXJhdGlvbnM/OiBzdHJpbmdbXVxuICBub3RlPzogc3RyaW5nXG4gIGFwcHJvdmFsU3RhdHVzPzogQ2FyZ29SZXBhaXJBcHByb3ZhbFN0YXR1c1xuICBhcHByb3ZhbE5vdGU/OiBzdHJpbmdcbiAgbGFib3JDb3N0PzogbnVtYmVyXG4gIHBhcnRzQ29zdD86IG51bWJlclxuICBkaXN0cmlidXRvckNvc3Q/OiBudW1iZXJcbiAgaW50ZXJuYWxTZXJ2aWNlQ29zdD86IG51bWJlclxuICB0b3RhbENvc3Q/OiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJnb1JlcGFpclNwYXJlUGFydEl0ZW0ge1xuICBuYW1lOiBzdHJpbmdcbiAgcXVhbnRpdHk6IG51bWJlclxuICB1bml0Q29zdDogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZ29SZXBhaXJNZXRhIHtcbiAgYWN0aXZlOiBib29sZWFuXG4gIHRlY2huaWNpYW5JZD86IHN0cmluZ1xuICB0ZWNobmljaWFuTmFtZT86IHN0cmluZ1xuICBvcGVyYXRpb25zOiBzdHJpbmdbXVxuICBpbWFnZVVybD86IHN0cmluZ1xuICBub3RlPzogc3RyaW5nXG4gIHNwYXJlUGFydHM6IENhcmdvUmVwYWlyU3BhcmVQYXJ0SXRlbVtdXG4gIGFwcHJvdmFsU3RhdHVzOiBDYXJnb1JlcGFpckFwcHJvdmFsU3RhdHVzXG4gIGFwcHJvdmFsQXQ/OiBzdHJpbmdcbiAgYXBwcm92YWxOb3RlPzogc3RyaW5nXG4gIGxhYm9yQ29zdD86IG51bWJlclxuICBwYXJ0c0Nvc3Q/OiBudW1iZXJcbiAgZGlzdHJpYnV0b3JDb3N0PzogbnVtYmVyXG4gIGludGVybmFsU2VydmljZUNvc3Q/OiBudW1iZXJcbiAgdG90YWxDb3N0PzogbnVtYmVyXG4gIHN0YXR1czogJ3BlbmRpbmcnIHwgJ2luX3Byb2dyZXNzJyB8ICdjb21wbGV0ZWQnXG4gIHNoaXBtZW50U3RhdHVzOiAncGVuZGluZycgfCAncmVhZHlfdG9fc2hpcCcgfCAnc2hpcHBlZCdcbiAgaGlzdG9yeTogQ2FyZ29SZXBhaXJIaXN0b3J5SXRlbVtdXG4gIHVwZGF0ZWRBdDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIENhcmdvUmVwYWlyQXBwcm92YWxTdGF0dXMgPSAncGVuZGluZycgfCAnYXBwcm92ZWQnIHwgJ3JlamVjdGVkJ1xuXG5jb25zdCBNRVRBX1RBRyA9ICdbW0NBUkdPX1JFUEFJUl9NRVRBXV0nXG5cbmNvbnN0IGRlZmF1bHRNZXRhID0gKCk6IENhcmdvUmVwYWlyTWV0YSA9PiAoe1xuICBhY3RpdmU6IHRydWUsXG4gIHRlY2huaWNpYW5OYW1lOiAnJyxcbiAgb3BlcmF0aW9uczogW10sXG4gIGltYWdlVXJsOiAnJyxcbiAgbm90ZTogJycsXG4gIHNwYXJlUGFydHM6IFtdLFxuICBhcHByb3ZhbFN0YXR1czogJ3BlbmRpbmcnLFxuICBhcHByb3ZhbEF0OiAnJyxcbiAgYXBwcm92YWxOb3RlOiAnJyxcbiAgbGFib3JDb3N0OiAwLFxuICBwYXJ0c0Nvc3Q6IDAsXG4gIGRpc3RyaWJ1dG9yQ29zdDogMCxcbiAgaW50ZXJuYWxTZXJ2aWNlQ29zdDogMCxcbiAgdG90YWxDb3N0OiAwLFxuICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgc2hpcG1lbnRTdGF0dXM6ICdwZW5kaW5nJyxcbiAgaGlzdG9yeTogW10sXG4gIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxufSlcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2FyZ29SZXBhaXJNZXRhKG5vdGVzPzogc3RyaW5nIHwgbnVsbCk6IHtcbiAgY2xlYW5Ob3Rlczogc3RyaW5nXG4gIG1ldGE6IENhcmdvUmVwYWlyTWV0YSB8IG51bGxcbn0ge1xuICBjb25zdCB0ZXh0ID0gKG5vdGVzIHx8ICcnKS50cmltKClcbiAgaWYgKCF0ZXh0LmluY2x1ZGVzKE1FVEFfVEFHKSkge1xuICAgIHJldHVybiB7IGNsZWFuTm90ZXM6IHRleHQsIG1ldGE6IG51bGwgfVxuICB9XG5cbiAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKVxuICBjb25zdCBjbGVhbjogc3RyaW5nW10gPSBbXVxuICBsZXQgbWV0YTogQ2FyZ29SZXBhaXJNZXRhIHwgbnVsbCA9IG51bGxcblxuICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICBpZiAoIWxpbmUuc3RhcnRzV2l0aChNRVRBX1RBRykpIHtcbiAgICAgIGNsZWFuLnB1c2gobGluZSlcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgY29uc3QgcGF5bG9hZCA9IGxpbmUuc2xpY2UoTUVUQV9UQUcubGVuZ3RoKS50cmltKClcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShwYXlsb2FkKVxuICAgICAgbWV0YSA9IHtcbiAgICAgICAgLi4uZGVmYXVsdE1ldGEoKSxcbiAgICAgICAgLi4ucGFyc2VkLFxuICAgICAgICBoaXN0b3J5OiBBcnJheS5pc0FycmF5KHBhcnNlZD8uaGlzdG9yeSkgPyBwYXJzZWQuaGlzdG9yeSA6IFtdLFxuICAgICAgICBvcGVyYXRpb25zOiBBcnJheS5pc0FycmF5KHBhcnNlZD8ub3BlcmF0aW9ucykgPyBwYXJzZWQub3BlcmF0aW9ucyA6IFtdLFxuICAgICAgICBzcGFyZVBhcnRzOiBBcnJheS5pc0FycmF5KHBhcnNlZD8uc3BhcmVQYXJ0cykgPyBwYXJzZWQuc3BhcmVQYXJ0cyA6IFtdLFxuICAgICAgICBhcHByb3ZhbFN0YXR1czpcbiAgICAgICAgICBwYXJzZWQ/LmFwcHJvdmFsU3RhdHVzID09PSAnYXBwcm92ZWQnIHx8IHBhcnNlZD8uYXBwcm92YWxTdGF0dXMgPT09ICdyZWplY3RlZCdcbiAgICAgICAgICAgID8gcGFyc2VkLmFwcHJvdmFsU3RhdHVzXG4gICAgICAgICAgICA6ICdwZW5kaW5nJyxcbiAgICAgICAgc2hpcG1lbnRTdGF0dXM6XG4gICAgICAgICAgcGFyc2VkPy5zaGlwbWVudFN0YXR1cyA9PT0gJ3JlYWR5X3RvX3NoaXAnIHx8IHBhcnNlZD8uc2hpcG1lbnRTdGF0dXMgPT09ICdzaGlwcGVkJ1xuICAgICAgICAgICAgPyBwYXJzZWQuc2hpcG1lbnRTdGF0dXNcbiAgICAgICAgICAgIDogJ3BlbmRpbmcnLFxuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgbWV0YSA9IG51bGxcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNsZWFuTm90ZXM6IGNsZWFuLmpvaW4oJ1xcbicpLnRyaW0oKSxcbiAgICBtZXRhLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cHNlcnRDYXJnb1JlcGFpck1ldGEobm90ZXM6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsIGlucHV0OiBQYXJ0aWFsPENhcmdvUmVwYWlyTWV0YT4pOiBzdHJpbmcge1xuICBjb25zdCB7IGNsZWFuTm90ZXMsIG1ldGEgfSA9IHBhcnNlQ2FyZ29SZXBhaXJNZXRhKG5vdGVzKVxuICBjb25zdCBuZXh0OiBDYXJnb1JlcGFpck1ldGEgPSB7XG4gICAgLi4uKG1ldGEgfHwgZGVmYXVsdE1ldGEoKSksXG4gICAgLi4uaW5wdXQsXG4gICAgb3BlcmF0aW9uczogQXJyYXkuaXNBcnJheShpbnB1dC5vcGVyYXRpb25zKSA/IGlucHV0Lm9wZXJhdGlvbnMgOiAobWV0YT8ub3BlcmF0aW9ucyB8fCBbXSksXG4gICAgc3BhcmVQYXJ0czogQXJyYXkuaXNBcnJheShpbnB1dC5zcGFyZVBhcnRzKSA/IGlucHV0LnNwYXJlUGFydHMgOiAobWV0YT8uc3BhcmVQYXJ0cyB8fCBbXSksXG4gICAgaGlzdG9yeTogQXJyYXkuaXNBcnJheShpbnB1dC5oaXN0b3J5KSA/IGlucHV0Lmhpc3RvcnkgOiAobWV0YT8uaGlzdG9yeSB8fCBbXSksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH1cblxuICBjb25zdCBwYXJ0cyA9IFtjbGVhbk5vdGVzLCBgJHtNRVRBX1RBR30ke0pTT04uc3RyaW5naWZ5KG5leHQpfWBdLmZpbHRlcihCb29sZWFuKVxuICByZXR1cm4gcGFydHMuam9pbignXFxuJylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZENhcmdvUmVwYWlySGlzdG9yeShcbiAgbm90ZXM6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGl0ZW06IENhcmdvUmVwYWlySGlzdG9yeUl0ZW0sXG4gIHBhdGNoPzogUGFydGlhbDxDYXJnb1JlcGFpck1ldGE+XG4pOiBzdHJpbmcge1xuICBjb25zdCB7IG1ldGEgfSA9IHBhcnNlQ2FyZ29SZXBhaXJNZXRhKG5vdGVzKVxuICBjb25zdCBiYXNlID0gbWV0YSB8fCBkZWZhdWx0TWV0YSgpXG4gIGNvbnN0IGhpc3RvcnkgPSBbLi4uYmFzZS5oaXN0b3J5LCBpdGVtXVxuICByZXR1cm4gdXBzZXJ0Q2FyZ29SZXBhaXJNZXRhKG5vdGVzLCB7XG4gICAgLi4ucGF0Y2gsXG4gICAgaGlzdG9yeSxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJNRVRBX1RBRyIsImRlZmF1bHRNZXRhIiwiYWN0aXZlIiwidGVjaG5pY2lhbk5hbWUiLCJvcGVyYXRpb25zIiwiaW1hZ2VVcmwiLCJub3RlIiwic3BhcmVQYXJ0cyIsImFwcHJvdmFsU3RhdHVzIiwiYXBwcm92YWxBdCIsImFwcHJvdmFsTm90ZSIsImxhYm9yQ29zdCIsInBhcnRzQ29zdCIsImRpc3RyaWJ1dG9yQ29zdCIsImludGVybmFsU2VydmljZUNvc3QiLCJ0b3RhbENvc3QiLCJzdGF0dXMiLCJzaGlwbWVudFN0YXR1cyIsImhpc3RvcnkiLCJ1cGRhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwYXJzZUNhcmdvUmVwYWlyTWV0YSIsIm5vdGVzIiwidGV4dCIsInRyaW0iLCJpbmNsdWRlcyIsImNsZWFuTm90ZXMiLCJtZXRhIiwibGluZXMiLCJzcGxpdCIsImNsZWFuIiwibGluZSIsInN0YXJ0c1dpdGgiLCJwdXNoIiwicGF5bG9hZCIsInNsaWNlIiwibGVuZ3RoIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsInVwc2VydENhcmdvUmVwYWlyTWV0YSIsImlucHV0IiwibmV4dCIsInBhcnRzIiwic3RyaW5naWZ5IiwiZmlsdGVyIiwiQm9vbGVhbiIsImFwcGVuZENhcmdvUmVwYWlySGlzdG9yeSIsIml0ZW0iLCJwYXRjaCIsImJhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/cargo-repair.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ]\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBSztRQUFDO1FBQVM7UUFBUztLQUFPO0FBQ2pDLEdBQUU7QUFFRixJQUFJQyxJQUF5QixFQUFjO0lBQ3pDSixnQkFBZ0JFLE1BQU0sR0FBR0E7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXN0ZWsvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KHtcclxuICBsb2c6IFsncXVlcnknLCAnZXJyb3InLCAnd2FybiddLFxyXG59KVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYVxufVxuXHJcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcargo%2F%5Bid%5D%2Froute&page=%2Fapi%2Fcargo%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcargo%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBurak%5CDocuments%5CGitHub%5Cdestek&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();